# バッチ一覧

本ドキュメントでは、年間スキル報告書WEB化PJTで実装するバッチ処理の一覧を管理します。

## バッチ処理概要

バッチ処理は、定期的に実行される処理や、大量データを一括で処理する機能を提供します。本システムでは、データ同期、通知、集計、メンテナンスなどの目的でバッチ処理を実装します。

## バッチ処理一覧

| バッチID | バッチ名 | 概要 | 実行周期 | 優先度 | 関連機能ID | 関連要求仕様ID | 詳細仕様書 |
|---------|---------|------|---------|-------|-----------|--------------|----------|
| BATCH-001 | アカウントロック解除バッチ | 一定期間経過したアカウントロックを自動解除する | 日次 | 高 | F01 | PLT.1-WEB.1, ACC.1-ROLE.1 | [バッチ仕様書_BATCH-001.md](specs/バッチ仕様書_BATCH-001.md) |
| BATCH-002 | パスワード期限通知バッチ | パスワード有効期限が近づいたユーザーに通知する | 日次 | 高 | F01 | PLT.1-WEB.1, ACC.1-ROLE.1 | [バッチ仕様書_BATCH-002.md](specs/バッチ仕様書_BATCH-002.md) |
| BATCH-003 | 監査ログアーカイブバッチ | 古い監査ログをアーカイブし、DBから削除する | 月次 | 中 | F02, F18 | ACC.3-AUDT.1 | [バッチ仕様書_BATCH-003.md](specs/バッチ仕様書_BATCH-003.md) |
| BATCH-004 | 組織情報同期バッチ | 人事システムから組織・役職情報を同期する | 日次 | 最高 | F03, F04 | PRO.1-DEPT.1, PRO.2-SYNC.1 | [バッチ仕様書_BATCH-004.md](specs/バッチ仕様書_BATCH-004.md) |
| BATCH-005 | スキルマスタメンテナンスバッチ | スキルマスタの整合性チェックと自動メンテナンス | 週次 | 高 | F05 | SKL.1-HIER.1, SKL.1-MAINT.1 | [バッチ仕様書_BATCH-005.md](specs/バッチ仕様書_BATCH-005.md) |
| BATCH-006 | スキル検索インデックス生成バッチ | スキル検索用のインデックスを生成・更新する | 日次 | 高 | F06, F07, F08 | SKL.1-SRCH.1 | [バッチ仕様書_BATCH-006.md](specs/バッチ仕様書_BATCH-006.md) |
| BATCH-007 | 資格期限通知バッチ | 資格の有効期限が近づいたユーザーに通知する | 日次 | 中 | F06, F22 | SKL.2-EXP.1 | [バッチ仕様書_BATCH-007.md](specs/バッチ仕様書_BATCH-007.md) |
| BATCH-008 | 目標進捗リマインダーバッチ | 目標の進捗確認期限が近づいたユーザーに通知する | 週次 | 中 | F09, F10 | CAR.2-REV.1 | [バッチ仕様書_BATCH-008.md](specs/バッチ仕様書_BATCH-008.md) |
| BATCH-009 | 案件実績集計バッチ | 案件実績データを集計し、レポートを生成する | 月次 | 中 | F11 | WPM.1-DET.1, WPM.1-SKILL.1 | [バッチ仕様書_BATCH-009.md](specs/バッチ仕様書_BATCH-009.md) |
| BATCH-010 | 一括登録ジョブログ削除バッチ | 古い一括登録ジョブログを削除する | 月次 | 低 | F12 | WPM.1-BULK.1 | [バッチ仕様書_BATCH-010.md](specs/バッチ仕様書_BATCH-010.md) |
| BATCH-011 | PDUポイント計算バッチ | 研修参加履歴からPDUポイントを自動計算する | 日次 | 中 | F13, F14 | TRN.3-PDU.1 | [バッチ仕様書_BATCH-011.md](specs/バッチ仕様書_BATCH-011.md) |
| BATCH-012 | 帳票一括生成バッチ | 全社員の帳票を一括で生成する | 月次 | 低 | F15 | RPT.1-EXCEL.1, RPT.1-PDF.1 | [バッチ仕様書_BATCH-012.md](specs/バッチ仕様書_BATCH-012.md) |
| BATCH-013 | データバックアップバッチ | システムデータの定期バックアップを実行する | 日次 | 高 | F16 | PLT.2-BKP.1 | [バッチ仕様書_BATCH-013.md](specs/バッチ仕様書_BATCH-013.md) |
| BATCH-014 | システムログ監視バッチ | システムログを監視し、異常を検知して通知する | 時間次 | 高 | F17, F18 | PLT.2-MON.1 | [バッチ仕様書_BATCH-014.md](specs/バッチ仕様書_BATCH-014.md) |
| BATCH-015 | マスタデータ同期バッチ | 外部システムとマスタデータを同期する | 日次 | 中 | F04, F19 | PRO.2-SYNC.1 | [バッチ仕様書_BATCH-015.md](specs/バッチ仕様書_BATCH-015.md) |
| BATCH-016 | システム設定更新バッチ | システム設定の一括更新を行う | 手動 | 低 | F20 | - | [バッチ仕様書_BATCH-016.md](specs/バッチ仕様書_BATCH-016.md) |
| BATCH-017 | 期限切れトークン削除バッチ | 期限切れの認証トークンを削除する | 日次 | 高 | F01, F21, F22 | PLT.2-ENC.1 | [バッチ仕様書_BATCH-017.md](specs/バッチ仕様書_BATCH-017.md) |

## 実行スケジュール

### 日次バッチ（毎日実行）
- BATCH-001: アカウントロック解除バッチ（AM 3:00）
- BATCH-002: パスワード期限通知バッチ（AM 5:00）
- BATCH-004: 組織情報同期バッチ（AM 2:00）
- BATCH-006: スキル検索インデックス生成バッチ（AM 4:00）
- BATCH-007: 資格期限通知バッチ（AM 7:00）
- BATCH-011: PDUポイント計算バッチ（AM 3:30）
- BATCH-013: データバックアップバッチ（AM 1:00）
- BATCH-015: マスタデータ同期バッチ（AM 2:30）
- BATCH-017: 期限切れトークン削除バッチ（AM 4:30）

### 週次バッチ（毎週実行）
- BATCH-005: スキルマスタメンテナンスバッチ（毎週月曜 AM 2:30）
- BATCH-008: 目標進捗リマインダーバッチ（毎週金曜 AM 8:00）

### 月次バッチ（毎月実行）
- BATCH-003: 監査ログアーカイブバッチ（毎月1日 AM 1:30）
- BATCH-009: 案件実績集計バッチ（毎月1日 AM 3:30）
- BATCH-010: 一括登録ジョブログ削除バッチ（毎月1日 AM 2:30）
- BATCH-012: 帳票一括生成バッチ（毎月末日 AM 1:00）

### 時間次バッチ（定期的に実行）
- BATCH-014: システムログ監視バッチ（10分ごとに実行）

### 手動実行バッチ
- BATCH-016: システム設定更新バッチ（必要に応じて手動実行）

## 障害時の対応

1. バッチ処理の実行結果は、システム管理画面（SCR-ADMIN）で確認できます。
2. 障害発生時は、システム管理者に自動通知されます。
3. 障害内容に応じて、以下の対応を行います：
   - ログ確認：バッチログを確認し、エラー内容を特定
   - 再実行：一時的なエラーの場合は、手動で再実行
   - データ修正：データ不整合が原因の場合は、データを修正して再実行
   - 開発者対応：システムバグが原因の場合は、開発者に修正を依頼

## バッチ処理の監視

バッチ処理の実行状況は、以下の方法で監視されます：

1. システム管理画面（SCR-ADMIN）でのリアルタイム監視
2. バッチ実行結果のメール通知
3. 障害発生時のアラート通知（メール、SMS）
4. バッチログの自動アーカイブと保存（3ヶ月間）

## 改訂履歴

| 改訂日     | 改訂者 | 改訂内容                                         |
|------------|--------|--------------------------------------------------|
| 2025/05/29 | 初版   | 初版作成                                         |
