# テーブル一覧

以下は、マスタ系・トランザクション系・履歴系・システム系・ワーク系・インターフェイス系のカテゴリに分け、  
**テーブル名のプレフィックスで各カテゴリを識別できる命名規則**を適用したテーブル一覧です。

| テーブルID | カテゴリ     | テーブル名（プレフィックス付き） | 論理名（用途）          | 主な利用機能カテゴリ     | 主な利用API ID         | 主な利用バッチID     | 優先度 | 備考・関連画面例              |
|------------|--------------|----------------------------------|-------------------------|-------------------------|------------------------|----------------------|--------|-------------------------------|
| [TBL-001](tables/テーブル定義書_MST_UserAuth_ユーザー認証情報.md)    | マスタ系     | MST_UserAuth                     | ユーザー認証情報        | 認証・認可              | API-001, API-002       | BATCH-001, BATCH-002, BATCH-003, BATCH-017 | 最高   | SCR-LOGIN, SCR-ACCESS         |
| [TBL-002](tables/テーブル定義書_MST_Role_ロール情報.md)    | マスタ系     | MST_Role                         | ロール情報              | 認証・認可              | API-003                | BATCH-003            | 高     | SCR-ACCESS                    |
| [TBL-003](tables/テーブル定義書_MST_Permission_権限情報.md)    | マスタ系     | MST_Permission                   | 権限情報                | 認証・認可              | API-003, API-004       | BATCH-003            | 高     | SCR-ACCESS                    |
| [TBL-004](tables/テーブル定義書_MST_UserRole_ユーザーロール関連.md)    | マスタ系     | MST_UserRole                     | ユーザーロール紐付け    | 認証・認可              | API-004                | BATCH-003            | 高     | SCR-ACCESS                    |
| [TBL-006](tables/テーブル定義書_MST_Employee_社員基本情報.md)    | マスタ系     | MST_Employee                     | 社員基本情報            | プロフィール管理        | API-005                | BATCH-004            | 最高   | SCR-PROFILE                   |
| [TBL-007](tables/テーブル定義書_MST_Department_部署マスタ.md)    | マスタ系     | MST_Department                   | 部署マスタ              | プロフィール管理        | API-006                | BATCH-004, BATCH-015 | 最高   | SCR-PROFILE, SCR-ADMIN        |
| [TBL-008](tables/テーブル定義書_MST_Position_役職マスタ.md)    | マスタ系     | MST_Position                     | 役職マスタ              | プロフィール管理        | API-006                | BATCH-004, BATCH-015 | 最高   | SCR-PROFILE, SCR-ADMIN        |
| [TBL-009](tables/テーブル定義書_MST_SkillHierarchy_スキル階層マスタ.md)    | マスタ系     | MST_SkillHierarchy               | スキル階層マスタ        | スキル管理              | API-007                | BATCH-005            | 高     | SCR-SKILL-M                   |
| [TBL-011](tables/テーブル定義書_MST_Certification_資格情報.md)    | マスタ系     | MST_Certification                | 資格情報                | スキル管理              | API-009, API-010       | BATCH-007            | 高     | SCR-SKILL, SCR-SKILL-M        |
| [TBL-013](tables/テーブル定義書_MST_CareerPlan_目標・キャリアプラン.md)    | マスタ系     | MST_CareerPlan                   | 目標・キャリアプラン    | 目標・キャリア管理      | API-012                | BATCH-008            | 中     | SCR-CAR-PLAN                  |
| [TBL-019](tables/テーブル定義書_MST_ReportTemplate_帳票テンプレート.md)    | マスタ系     | MST_ReportTemplate               | 帳票テンプレート        | レポート・分析          | API-018                | BATCH-012            | 低     | SCR-REPORT                    |
| [TBL-023](tables/テーブル定義書_MST_SystemConfig_システム設定.md)    | マスタ系     | MST_SystemConfig                 | システム設定            | システム管理            | API-024                | BATCH-016            | 低     | SCR-ADMIN                     |
| [TBL-026](tables/テーブル定義書_MST_Tenant_テナント管理.md)    | マスタ系     | MST_Tenant                       | テナント管理            | マルチテナント管理      | API-025                | BATCH-018-01, BATCH-018-02 | 最高   | SCR-TENANT-ADMIN              |
| [TBL-027](tables/テーブル定義書_MST_TenantSettings_テナント設定.md)    | マスタ系     | MST_TenantSettings               | テナント設定            | マルチテナント管理      | API-026                | BATCH-018-05         | 最高   | SCR-TENANT-ADMIN              |
| [TBL-028](tables/テーブル定義書_MST_NotificationSettings_通知設定.md)    | マスタ系     | MST_NotificationSettings         | 通知設定                | 通知・連携管理          | API-028                | BATCH-019-05         | 高     | SCR-NOTIFY-ADMIN              |
| [TBL-029](tables/テーブル定義書_MST_NotificationTemplate_通知テンプレート.md)    | マスタ系     | MST_NotificationTemplate         | 通知テンプレート        | 通知・連携管理          | API-029                | BATCH-019-01         | 高     | SCR-NOTIFY-ADMIN              |
| [TBL-034](tables/テーブル定義書_MST_SkillCategory_スキルカテゴリマスタ.md)    | マスタ系     | MST_SkillCategory                | スキルカテゴリマスタ    | スキル管理              | API-030                | BATCH-020            | 高     | SCR-SKILL-M                   |
| [TBL-035](tables/テーブル定義書_MST_JobType_職種マスタ.md)              | マスタ系     | MST_JobType                      | 職種マスタ              | プロフィール管理        | API-031                | BATCH-027            | 最高   | SCR-PROFILE, SCR-ADMIN        |
| [TBL-036](tables/テーブル定義書_MST_SkillGrade_スキルグレードマスタ.md)  | マスタ系     | MST_SkillGrade                   | スキルグレードマスタ    | スキル管理              | API-032                | BATCH-028            | 高     | SCR-SKILL-M                   |
| [TBL-037](tables/テーブル定義書_MST_CertificationRequirement_資格要件マスタ.md) | マスタ系     | MST_CertificationRequirement     | 資格要件マスタ          | スキル管理              | API-033                | BATCH-029            | 高     | SCR-SKILL-M                   |
| [TBL-038](tables/テーブル定義書_MST_EmployeeJobType_社員職種関連.md)    | マスタ系     | MST_EmployeeJobType              | 社員職種関連            | プロフィール管理        | API-034                | BATCH-030            | 最高   | SCR-PROFILE, SCR-ADMIN        |
| [TBL-039](tables/テーブル定義書_MST_JobTypeSkillGrade_職種スキルグレード関連.md) | マスタ系     | MST_JobTypeSkillGrade            | 職種スキルグレード関連  | スキル管理              | API-035                | BATCH-031            | 高     | SCR-SKILL-M                   |
| [TBL-040](tables/テーブル定義書_MST_SkillGradeRequirement_スキルグレード要件.md) | マスタ系     | MST_SkillGradeRequirement        | スキルグレード要件      | スキル管理              | API-036                | BATCH-032            | 高     | SCR-SKILL-M                   |
| [TBL-041](tables/テーブル定義書_MST_JobTypeSkill_職種スキル関連.md)     | マスタ系     | MST_JobTypeSkill                 | 職種スキル関連          | スキル管理              | API-037                | BATCH-033            | 高     | SCR-SKILL-M                   |
| [TBL-042](tables/テーブル定義書_MST_EmployeeDepartment_社員部署関連.md) | マスタ系     | MST_EmployeeDepartment           | 社員部署関連            | プロフィール管理        | API-020                | BATCH-025            | 最高   | SCR-PROFILE, SCR-ADMIN        |
| [TBL-043](tables/テーブル定義書_MST_EmployeePosition_社員役職関連.md)   | マスタ系     | MST_EmployeePosition             | 社員役職関連            | プロフィール管理        | API-021                | BATCH-026            | 最高   | SCR-PROFILE, SCR-ADMIN        |
| [TBL-044](tables/テーブル定義書_MST_SkillItem_スキル項目マスタ.md)       | マスタ系     | MST_SkillItem                    | スキル項目マスタ        | スキル管理              | API-038                | BATCH-034            | 高     | SCR-SKILL-M                   |
| [TBL-045](tables/テーブル定義書_MST_TrainingProgram_研修プログラム.md)   | マスタ系     | MST_TrainingProgram              | 研修プログラム          | 研修・教育管理          | API-039                | BATCH-035            | 中     | SCR-TRAIN-M                   |
| [TBL-010](tables/テーブル定義書_TRN_SkillRecord_スキル評価記録.md)    | トランザクション系 | TRN_SkillRecord                  | スキル情報              | スキル管理              | API-008                | BATCH-006            | 最高   | SCR-SKILL                     |
| [TBL-014](tables/テーブル定義書_TRN_GoalProgress_目標進捗.md)    | トランザクション系 | TRN_GoalProgress                 | 目標進捗                | 目標・キャリア管理      | API-013                | BATCH-008            | 中     | SCR-CAR-EVAL                  |
| [TBL-015](tables/テーブル定義書_TRN_ProjectRecord_案件実績.md)    | トランザクション系 | TRN_ProjectRecord                | 案件実績                | 作業実績管理            | API-014                | BATCH-009            | 中     | SCR-WORK                      |
| [TBL-017](tables/テーブル定義書_TRN_TrainingHistory_研修履歴.md)    | トランザクション系 | TRN_TrainingHistory              | 研修参加履歴            | 研修・教育管理          | API-016                | BATCH-011            | 中     | SCR-TRAIN                     |
| [TBL-018](tables/テーブル定義書_TRN_PDU_継続教育ポイント.md)    | トランザクション系 | TRN_PDU                          | 継続教育ポイント        | 研修・教育管理          | API-017                | BATCH-011            | 中     | SCR-TRAIN-M                   |
| [TBL-046](tables/テーブル定義書_TRN_SkillEvidence_スキル証跡.md)      | トランザクション系 | TRN_SkillEvidence                | スキル証跡              | スキル管理              | API-040                | BATCH-036            | 中     | SCR-SKILL                     |
| [TBL-047](tables/テーブル定義書_TRN_Notification_通知履歴.md)        | トランザクション系 | TRN_Notification                 | 通知履歴                | 通知・連携管理          | API-041                | BATCH-037            | 中     | SCR-NOTIFY                    |
| [TBL-012](tables/テーブル定義書_SYS_SkillIndex_スキル検索インデックス.md)    | システム系   | SYS_SkillIndex                   | スキル検索インデックス  | スキル管理              | API-011                | BATCH-006            | 高     | SCR-SKILL-SEARCH              |
| [TBL-020](tables/テーブル定義書_SYS_SkillMatrix_スキルマップ.md)    | システム系   | SYS_SkillMatrix                  | スキルマップ            | レポート・分析          | API-019                | BATCH-006            | 低     | SCR-SKILL-MAP                 |
| [TBL-021](tables/テーブル定義書_SYS_BackupHistory_バックアップ履歴.md)    | システム系   | SYS_BackupHistory                | バックアップ履歴        | システム管理            | API-020                | BATCH-013            | 高     | SCR-ADMIN                     |
| [TBL-022](tables/テーブル定義書_SYS_SystemLog_システムログ.md)    | システム系   | SYS_SystemLog                    | システムログ            | システム管理            | API-021                | BATCH-014            | 高     | SCR-ADMIN                     |
| [TBL-024](tables/テーブル定義書_SYS_TokenStore_トークン管理.md)    | システム系   | SYS_TokenStore                   | トークン管理            | 認証・認可              | API-001, API-002       | BATCH-017            | 高     | セッション管理                |
| [TBL-025](tables/テーブル定義書_SYS_MasterData_マスタデータ全般.md)    | システム系   | SYS_MasterData                   | マスタデータ全般        | システム管理            | API-023                | BATCH-015            | 低     | SCR-ADMIN                     |
| [TBL-030](tables/テーブル定義書_SYS_TenantUsage_テナント使用量.md)    | システム系   | SYS_TenantUsage                  | テナント使用量          | マルチテナント管理      | API-025                | BATCH-018-01         | 高     | SCR-TENANT-ADMIN              |
| [TBL-031](tables/テーブル定義書_SYS_IntegrationConfig_外部連携設定.md)    | システム系   | SYS_IntegrationConfig            | 外部連携設定            | 通知・連携管理          | API-028, API-029       | BATCH-019-03         | 高     | SCR-NOTIFY-ADMIN              |
| [TBL-005](tables/テーブル定義書_HIS_AuditLog_監査ログ.md)    | 履歴系       | HIS_AuditLog                     | 監査ログ                | 認証・認可・システム管理 | API-022                | BATCH-003, BATCH-014 | 高     | SCR-ACCESS, SCR-ADMIN         |
| [TBL-032](tables/テーブル定義書_HIS_NotificationLog_通知送信履歴.md)    | 履歴系       | HIS_NotificationLog              | 通知送信履歴            | 通知・連携管理          | API-029                | BATCH-019-04         | 中     | SCR-NOTIFY-ADMIN              |
| [TBL-033](tables/テーブル定義書_HIS_TenantBilling_テナント課金履歴.md)    | 履歴系       | HIS_TenantBilling                | テナント課金履歴        | マルチテナント管理      | API-025                | BATCH-018-02         | 高     | SCR-TENANT-ADMIN              |
| [TBL-016](tables/テーブル定義書_WRK_BatchJobLog_一括登録ジョブログ.md)    | ワーク系     | WRK_BatchJobLog                  | 一括登録ジョブログ      | 作業実績管理            | API-015                | BATCH-010            | 低     | SCR-WORK-BULK                 |

## インターフェイス系テーブル例（外部連携用）
※外部システム連携やインポート/エクスポート用の一時テーブルが必要な場合に追加

| テーブルID | カテゴリ       | テーブル名（プレフィックス付き） | 論理名（用途）                | 主な利用機能カテゴリ | 主な利用API ID | 主な利用バッチID | 優先度 | 備考・関連画面例      |
|------------|----------------|----------------------------------|-------------------------------|---------------------|---------------|------------------|--------|-----------------------|
| (例)       | インターフェイス系 | IF_OrgImport                     | 組織インポート用一時テーブル   | プロフィール管理    | API-006       | BATCH-004        | 中     | SCR-ADMIN             |
| (例)       | インターフェイス系 | IF_SkillImport                   | スキルインポート用一時テーブル | スキル管理          | API-007       | BATCH-005        | 中     | SCR-SKILL-M           |

## カテゴリとプレフィックス対応

| カテゴリ         | プレフィックス | 用途例                                                         |
|------------------|---------------|---------------------------------------------------------------|
| マスタ系         | MST_          | ユーザー、ロール、部署、役職、スキル階層、資格、システム設定等 |
| トランザクション系 | TRN_          | スキル情報、目標進捗、案件実績、研修参加履歴、PDU等            |
| 履歴系           | HIS_          | 監査ログ、操作履歴等                                           |
| システム系       | SYS_          | 検索インデックス、バックアップ履歴、システムログ、トークン等    |
| ワーク系         | WRK_          | 一括登録ジョブログ、バッチワーク等                             |
| インターフェイス系 | IF_           | 外部連携・インポート/エクスポート用一時テーブル                |

**この命名規則により、テーブル名を見るだけでカテゴリが分かり、設計・運用・監査が容易になります。**

## 🛠️ 生成スクリプト利用ガイド

### 基本的な使用方法

```bash
# 全テーブル定義書生成
python3 create_table_definitions_v6.py

# 個別テーブル生成
python3 create_table_definitions_v6.py --table MST_Employee
python3 create_table_definitions_v6.py --table MST_Role,MST_Permission

# カテゴリ別生成
python3 create_table_definitions_v6.py --category マスタ系
python3 create_table_definitions_v6.py --category "認証・権限"

# 出力先指定
python3 create_table_definitions_v6.py --table MST_Employee --output-dir custom/
```

### ⚠️ 重要な注意事項

1. **レイアウト依存性**: 本テーブル一覧のマークダウン形式を変更した場合、生成スクリプトの修正が必要
2. **YAML依存性**: `table-details/*.yaml`ファイルの構造変更時もスクリプト修正が必要
3. **DDL生成**: テーブル定義書を元に実行可能なDDLファイルを自動生成
4. **改版管理**: 履歴情報はテーブル一覧・YAMLで管理し、定義書は参照のみ
5. **自動生成ファイル**: `tables/*.md`と`ddl/*.sql`は自動生成されるため手動編集禁止

### 📁 ファイル構成と依存関係

```
docs/design/database/
├── テーブル一覧.md              # 基本テーブル情報の管理（本ファイル）
├── table-details/              # 詳細定義・改版履歴の管理
│   ├── MST_Employee_details.yaml
│   ├── MST_Role_details.yaml
│   └── ...
├── tables/                     # 自動生成されるテーブル定義書（編集禁止）
│   ├── テーブル定義書_MST_Employee_社員基本情報.md
│   └── ...
├── ddl/                        # 自動生成されるDDLファイル（実行可能）
│   ├── MST_Employee.sql
│   ├── all_tables.sql          # 統合DDL
│   └── ...
└── create_table_definitions_v6.py  # 生成スクリプト
```

### 🔄 運用フロー

1. **テーブル一覧更新**: 本ファイルでテーブル基本情報を更新
2. **詳細定義更新**: `table-details/*.yaml`で詳細仕様・改版履歴を更新
3. **スクリプト実行**: 生成スクリプトでテーブル定義書・DDLを自動生成
4. **Git管理**: 変更をコミット・プッシュ

### 📝 改版履歴管理

- **マスター情報**: 本テーブル一覧で管理
- **詳細履歴**: 各YAMLファイルの`revision_history`セクションで管理
- **定義書**: 自動生成時にYAMLの履歴情報を参照・反映

### 🚨 トラブルシューティング

- **生成エラー**: テーブル一覧の表形式やYAMLの構造を確認
- **DDL実行エラー**: 外部キー関係や制約の依存順序を確認
- **ファイル競合**: 自動生成ファイルは手動編集せず、元データを修正してから再生成
