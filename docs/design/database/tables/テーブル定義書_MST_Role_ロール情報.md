# ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©æ›¸: MST_Role (ãƒ­ãƒ¼ãƒ«æƒ…å ±)

## ğŸ“‹ åŸºæœ¬æƒ…å ±

| é …ç›® | å†…å®¹ |
|------|------|
| ãƒ†ãƒ¼ãƒ–ãƒ«å | MST_Role |
| è«–ç†å | ãƒ­ãƒ¼ãƒ«æƒ…å ± |
| ã‚«ãƒ†ã‚´ãƒª | ãƒã‚¹ã‚¿ç³» |
| ä½œæˆæ—¥ | 2025-06-01 |

> **æ³¨æ„**: æœ¬ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©æ›¸ã¯è‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ã€‚æ‰‹å‹•ç·¨é›†ã¯è¡Œã‚ãªã„ã§ãã ã•ã„ã€‚
> è©³ç´°å®šç¾©ã®å¤‰æ›´ã¯ `table-details/MST_Role_details.yaml` ã§è¡Œã£ã¦ãã ã•ã„ã€‚


## ğŸ“ æ”¹ç‰ˆå±¥æ­´

> **æ³¨æ„**: æ”¹ç‰ˆå±¥æ­´ã®è©³ç´°ã¯ä»¥ä¸‹ã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ï¼š
> `table-details/TABLE_NAME_details.yaml`

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ›´æ–°æ—¥ | æ›´æ–°è€… | ä¸»ãªå¤‰æ›´å†…å®¹ |
|------------|--------|--------|-------------|
| 1.1.0 | 2025-06-01 | é–‹ç™ºãƒãƒ¼ãƒ  | æ”¹ç‰ˆå±¥æ­´ç®¡ç†æ©Ÿèƒ½è¿½åŠ ã€ãƒ­ãƒ¼ãƒ«éšå±¤ãƒ»æ¨©é™ç¶™æ‰¿æ©Ÿèƒ½å¼·åŒ– |
| 1.0.0 | 2025-06-01 | é–‹ç™ºãƒãƒ¼ãƒ  | åˆç‰ˆä½œæˆ - ãƒ­ãƒ¼ãƒ«æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ«ã®è©³ç´°å®šç¾© |


## ğŸ“ ãƒ†ãƒ¼ãƒ–ãƒ«æ¦‚è¦

MST_Roleï¼ˆãƒ­ãƒ¼ãƒ«æƒ…å ±ï¼‰ã¯ã€ã‚·ã‚¹ãƒ†ãƒ å†…ã®ãƒ­ãƒ¼ãƒ«ï¼ˆå½¹å‰²ï¼‰ã‚’ç®¡ç†ã™ã‚‹ãƒã‚¹ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«ã§ã™ã€‚

ä¸»ãªç›®çš„ï¼š
- ã‚·ã‚¹ãƒ†ãƒ å†…ã®ãƒ­ãƒ¼ãƒ«å®šç¾©ãƒ»ç®¡ç†ï¼ˆç®¡ç†è€…ã€ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€é–²è¦§è€…ç­‰ï¼‰
- ãƒ­ãƒ¼ãƒ«éšå±¤ã®ç®¡ç†ï¼ˆä¸Šä½ãƒ­ãƒ¼ãƒ«ã€ä¸‹ä½ãƒ­ãƒ¼ãƒ«ï¼‰
- ãƒ­ãƒ¼ãƒ«åˆ¥æ¨©é™è¨­å®šã®åŸºç›¤
- è·å‹™åˆ†é›¢ãƒ»æœ€å°æ¨©é™ã®åŸå‰‡å®Ÿè£…
- å‹•çš„æ¨©é™ç®¡ç†ãƒ»ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆRBACï¼‰
- çµ„ç¹”å¤‰æ›´ã«å¯¾å¿œã—ãŸæŸ”è»Ÿãªæ¨©é™ç®¡ç†
- ç›£æŸ»ãƒ»ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹å¯¾å¿œ

ã“ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®åŸºç›¤ã¨ãªã‚Šã€
é©åˆ‡ãªã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã¨æ¨©é™ç®¡ç†ã‚’å®Ÿç¾ã™ã‚‹é‡è¦ãªãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚


## ğŸ—‚ï¸ ã‚«ãƒ©ãƒ å®šç¾©

| ã‚«ãƒ©ãƒ å | è«–ç†å | ãƒ‡ãƒ¼ã‚¿å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|----------|--------|----------|------|------------|------|
| id | ID | VARCHAR(50) | Ã— |  | ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ï¼ˆUUIDï¼‰ |
| is_deleted | å‰Šé™¤ãƒ•ãƒ©ã‚° | BOOLEAN | Ã— |  | è«–ç†å‰Šé™¤ãƒ•ãƒ©ã‚° |
| tenant_id | ãƒ†ãƒŠãƒ³ãƒˆID | VARCHAR(50) | Ã— |  | ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆè­˜åˆ¥å­ |
| role_code | ãƒ­ãƒ¼ãƒ«ã‚³ãƒ¼ãƒ‰ | VARCHAR(20) | â—‹ |  | ãƒ­ãƒ¼ãƒ«ã‚’ä¸€æ„ã«è­˜åˆ¥ã™ã‚‹ã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹ï¼šROLE001ï¼‰ |
| role_name | ãƒ­ãƒ¼ãƒ«å | VARCHAR(100) | â—‹ |  | ãƒ­ãƒ¼ãƒ«ã®æ­£å¼åç§° |
| role_name_short | ãƒ­ãƒ¼ãƒ«åç•¥ç§° | VARCHAR(50) | â—‹ |  | ãƒ­ãƒ¼ãƒ«ã®ç•¥ç§°ãƒ»çŸ­ç¸®å |
| role_category | ãƒ­ãƒ¼ãƒ«ã‚«ãƒ†ã‚´ãƒª | ENUM | â—‹ |  | ãƒ­ãƒ¼ãƒ«ã®ã‚«ãƒ†ã‚´ãƒªï¼ˆSYSTEM:ã‚·ã‚¹ãƒ†ãƒ ã€BUSINESS:æ¥­å‹™ã€TENANT:ãƒ†ãƒŠãƒ³ãƒˆã€CUSTOM:ã‚«ã‚¹ã‚¿ãƒ ï¼‰ |
| role_level | ãƒ­ãƒ¼ãƒ«ãƒ¬ãƒ™ãƒ« | INT | â—‹ |  | ãƒ­ãƒ¼ãƒ«ã®éšå±¤ãƒ¬ãƒ™ãƒ«ï¼ˆ1:æœ€ä¸Šä½ã€æ•°å€¤ãŒå¤§ãã„ã»ã©ä¸‹ä½ï¼‰ |
| parent_role_id | è¦ªãƒ­ãƒ¼ãƒ«ID | VARCHAR(50) | â—‹ |  | ä¸Šä½ãƒ­ãƒ¼ãƒ«ã®IDï¼ˆMST_Roleã¸ã®è‡ªå·±å‚ç…§å¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| is_system_role | ã‚·ã‚¹ãƒ†ãƒ ãƒ­ãƒ¼ãƒ«ãƒ•ãƒ©ã‚° | BOOLEAN | â—‹ |  | ã‚·ã‚¹ãƒ†ãƒ æ¨™æº–ãƒ­ãƒ¼ãƒ«ã‹ã©ã†ã‹ï¼ˆå‰Šé™¤ãƒ»å¤‰æ›´ä¸å¯ï¼‰ |
| is_tenant_specific | ãƒ†ãƒŠãƒ³ãƒˆå›ºæœ‰ãƒ•ãƒ©ã‚° | BOOLEAN | â—‹ |  | ãƒ†ãƒŠãƒ³ãƒˆå›ºæœ‰ã®ãƒ­ãƒ¼ãƒ«ã‹ã©ã†ã‹ |
| max_users | æœ€å¤§ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•° | INT | â—‹ |  | ã“ã®ãƒ­ãƒ¼ãƒ«ã«å‰²ã‚Šå½“ã¦å¯èƒ½ãªæœ€å¤§ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•° |
| role_priority | ãƒ­ãƒ¼ãƒ«å„ªå…ˆåº¦ | INT | â—‹ | 999 | è¤‡æ•°ãƒ­ãƒ¼ãƒ«ä¿æŒæ™‚ã®å„ªå…ˆåº¦ï¼ˆæ•°å€¤ãŒå°ã•ã„ã»ã©é«˜å„ªå…ˆï¼‰ |
| auto_assign_conditions | è‡ªå‹•å‰²ã‚Šå½“ã¦æ¡ä»¶ | JSON | â—‹ |  | è‡ªå‹•ãƒ­ãƒ¼ãƒ«å‰²ã‚Šå½“ã¦ã®æ¡ä»¶ï¼ˆJSONå½¢å¼ï¼‰ |
| role_status | ãƒ­ãƒ¼ãƒ«çŠ¶æ…‹ | ENUM | â—‹ | ACTIVE | ãƒ­ãƒ¼ãƒ«ã®çŠ¶æ…‹ï¼ˆACTIVE:æœ‰åŠ¹ã€INACTIVE:ç„¡åŠ¹ã€DEPRECATED:éæ¨å¥¨ï¼‰ |
| effective_from | æœ‰åŠ¹é–‹å§‹æ—¥ | DATE | â—‹ |  | ãƒ­ãƒ¼ãƒ«ã®æœ‰åŠ¹é–‹å§‹æ—¥ |
| effective_to | æœ‰åŠ¹çµ‚äº†æ—¥ | DATE | â—‹ |  | ãƒ­ãƒ¼ãƒ«ã®æœ‰åŠ¹çµ‚äº†æ—¥ |
| sort_order | è¡¨ç¤ºé †åº | INT | â—‹ |  | ç”»é¢è¡¨ç¤ºæ™‚ã®é †åº |
| description | ãƒ­ãƒ¼ãƒ«èª¬æ˜ | TEXT | â—‹ |  | ãƒ­ãƒ¼ãƒ«ã®è©³ç´°èª¬æ˜ãƒ»ç”¨é€” |
| created_at | ä½œæˆæ—¥æ™‚ | TIMESTAMP | Ã— | CURRENT_TIMESTAMP | ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆæ—¥æ™‚ |
| updated_at | æ›´æ–°æ—¥æ™‚ | TIMESTAMP | Ã— | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | ãƒ¬ã‚³ãƒ¼ãƒ‰æ›´æ–°æ—¥æ™‚ |
| created_by | ä½œæˆè€… | VARCHAR(50) | Ã— |  | ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆè€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| updated_by | æ›´æ–°è€… | VARCHAR(50) | Ã— |  | ãƒ¬ã‚³ãƒ¼ãƒ‰æ›´æ–°è€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |

## ğŸ” ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å®šç¾©

| ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å | ã‚«ãƒ©ãƒ  | ãƒ¦ãƒ‹ãƒ¼ã‚¯ | èª¬æ˜ |
|----------------|--------|----------|------|
| idx_role_code | role_code | â—‹ | ãƒ­ãƒ¼ãƒ«ã‚³ãƒ¼ãƒ‰æ¤œç´¢ç”¨ï¼ˆä¸€æ„ï¼‰ |
| idx_role_category | role_category | Ã— | ãƒ­ãƒ¼ãƒ«ã‚«ãƒ†ã‚´ãƒªåˆ¥æ¤œç´¢ç”¨ |
| idx_role_level | role_level | Ã— | ãƒ­ãƒ¼ãƒ«ãƒ¬ãƒ™ãƒ«åˆ¥æ¤œç´¢ç”¨ |
| idx_parent_role | parent_role_id | Ã— | è¦ªãƒ­ãƒ¼ãƒ«åˆ¥æ¤œç´¢ç”¨ |
| idx_system_role | is_system_role | Ã— | ã‚·ã‚¹ãƒ†ãƒ ãƒ­ãƒ¼ãƒ«æ¤œç´¢ç”¨ |
| idx_tenant_specific | is_tenant_specific | Ã— | ãƒ†ãƒŠãƒ³ãƒˆå›ºæœ‰ãƒ­ãƒ¼ãƒ«æ¤œç´¢ç”¨ |
| idx_role_status | role_status | Ã— | ãƒ­ãƒ¼ãƒ«çŠ¶æ…‹åˆ¥æ¤œç´¢ç”¨ |
| idx_effective_period | effective_from, effective_to | Ã— | æœ‰åŠ¹æœŸé–“æ¤œç´¢ç”¨ |
| idx_sort_order | sort_order | Ã— | è¡¨ç¤ºé †åºæ¤œç´¢ç”¨ |

## ğŸ”’ åˆ¶ç´„å®šç¾©

| åˆ¶ç´„å | åˆ¶ç´„ã‚¿ã‚¤ãƒ— | å¯¾è±¡ã‚«ãƒ©ãƒ  | æ¡ä»¶ | èª¬æ˜ |
|--------|------------|------------|------|------|
| uk_role_code | UNIQUE | role_code |  | ãƒ­ãƒ¼ãƒ«ã‚³ãƒ¼ãƒ‰ä¸€æ„åˆ¶ç´„ |
| chk_role_level | CHECK |  | role_level > 0 | ãƒ­ãƒ¼ãƒ«ãƒ¬ãƒ™ãƒ«æ­£å€¤ãƒã‚§ãƒƒã‚¯åˆ¶ç´„ |
| chk_role_category | CHECK |  | role_category IN ('SYSTEM', 'BUSINESS', 'TENANT', 'CUSTOM') | ãƒ­ãƒ¼ãƒ«ã‚«ãƒ†ã‚´ãƒªå€¤ãƒã‚§ãƒƒã‚¯åˆ¶ç´„ |
| chk_role_status | CHECK |  | role_status IN ('ACTIVE', 'INACTIVE', 'DEPRECATED') | ãƒ­ãƒ¼ãƒ«çŠ¶æ…‹å€¤ãƒã‚§ãƒƒã‚¯åˆ¶ç´„ |
| chk_max_users | CHECK |  | max_users IS NULL OR max_users > 0 | æœ€å¤§ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°æ­£å€¤ãƒã‚§ãƒƒã‚¯åˆ¶ç´„ |
| chk_role_priority | CHECK |  | role_priority > 0 | ãƒ­ãƒ¼ãƒ«å„ªå…ˆåº¦æ­£å€¤ãƒã‚§ãƒƒã‚¯åˆ¶ç´„ |
| chk_effective_period | CHECK |  | effective_to IS NULL OR effective_from IS NULL OR effective_from <= effective_to | æœ‰åŠ¹æœŸé–“æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯åˆ¶ç´„ |
| chk_sort_order | CHECK |  | sort_order IS NULL OR sort_order >= 0 | è¡¨ç¤ºé †åºéè² å€¤ãƒã‚§ãƒƒã‚¯åˆ¶ç´„ |

## ğŸ”— å¤–éƒ¨ã‚­ãƒ¼é–¢ä¿‚

| å¤–éƒ¨ã‚­ãƒ¼å | ã‚«ãƒ©ãƒ  | å‚ç…§ãƒ†ãƒ¼ãƒ–ãƒ« | å‚ç…§ã‚«ãƒ©ãƒ  | æ›´æ–°æ™‚ | å‰Šé™¤æ™‚ | èª¬æ˜ |
|------------|--------|--------------|------------|--------|--------|------|
| fk_role_parent | parent_role_id | MST_Role | id | CASCADE | SET NULL | è¦ªãƒ­ãƒ¼ãƒ«ã¸ã®è‡ªå·±å‚ç…§å¤–éƒ¨ã‚­ãƒ¼ |

## ğŸ“Š ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿

```json
[
  {
    "role_code": "ROLE001",
    "role_name": "ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…",
    "role_name_short": "ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…",
    "role_category": "SYSTEM",
    "role_level": 1,
    "parent_role_id": null,
    "is_system_role": true,
    "is_tenant_specific": false,
    "max_users": 5,
    "role_priority": 1,
    "auto_assign_conditions": null,
    "role_status": "ACTIVE",
    "effective_from": "2025-01-01",
    "effective_to": null,
    "sort_order": 1,
    "description": "ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ç®¡ç†æ¨©é™ã‚’æŒã¤æœ€ä¸Šä½ãƒ­ãƒ¼ãƒ«"
  },
  {
    "role_code": "ROLE002",
    "role_name": "ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†è€…",
    "role_name_short": "ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†è€…",
    "role_category": "TENANT",
    "role_level": 2,
    "parent_role_id": null,
    "is_system_role": true,
    "is_tenant_specific": true,
    "max_users": 10,
    "role_priority": 2,
    "auto_assign_conditions": null,
    "role_status": "ACTIVE",
    "effective_from": "2025-01-01",
    "effective_to": null,
    "sort_order": 2,
    "description": "ãƒ†ãƒŠãƒ³ãƒˆå†…ã®ç®¡ç†æ¨©é™ã‚’æŒã¤ãƒ­ãƒ¼ãƒ«"
  },
  {
    "role_code": "ROLE003",
    "role_name": "ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼",
    "role_name_short": "ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼",
    "role_category": "BUSINESS",
    "role_level": 3,
    "parent_role_id": null,
    "is_system_role": true,
    "is_tenant_specific": false,
    "max_users": null,
    "role_priority": 10,
    "auto_assign_conditions": "{\"default\": true}",
    "role_status": "ACTIVE",
    "effective_from": "2025-01-01",
    "effective_to": null,
    "sort_order": 10,
    "description": "åŸºæœ¬çš„ãªæ¥­å‹™æ©Ÿèƒ½ã‚’åˆ©ç”¨ã§ãã‚‹ãƒ­ãƒ¼ãƒ«"
  }
]
```

## ğŸ“Œ ç‰¹è¨˜äº‹é …

- ãƒ­ãƒ¼ãƒ«éšå±¤ã¯è‡ªå·±å‚ç…§å¤–éƒ¨ã‚­ãƒ¼ã§è¡¨ç¾
- ã‚·ã‚¹ãƒ†ãƒ ãƒ­ãƒ¼ãƒ«ã¯å‰Šé™¤ãƒ»å¤‰æ›´ä¸å¯
- ãƒ†ãƒŠãƒ³ãƒˆå›ºæœ‰ãƒ­ãƒ¼ãƒ«ã¯ãƒ†ãƒŠãƒ³ãƒˆå†…ã§ã®ã¿æœ‰åŠ¹
- è¤‡æ•°ãƒ­ãƒ¼ãƒ«ä¿æŒæ™‚ã¯å„ªå…ˆåº¦ã§æ¨©é™ã‚’æ±ºå®š
- è‡ªå‹•å‰²ã‚Šå½“ã¦æ¡ä»¶ã¯JSONå½¢å¼ã§æŸ”è»Ÿã«è¨­å®š
- æœ‰åŠ¹æœŸé–“ã«ã‚ˆã‚‹æ™‚é™ãƒ­ãƒ¼ãƒ«è¨­å®šãŒå¯èƒ½

## ğŸ“‹ æ¥­å‹™ãƒ«ãƒ¼ãƒ«

- ãƒ­ãƒ¼ãƒ«ã‚³ãƒ¼ãƒ‰ã¯æ–°è¨­æ™‚ã«è‡ªå‹•æ¡ç•ªï¼ˆROLE + 3æ¡é€£ç•ªï¼‰
- ã‚·ã‚¹ãƒ†ãƒ ãƒ­ãƒ¼ãƒ«ã¯ is_system_role = true ã§ä¿è­·
- è¦ªãƒ­ãƒ¼ãƒ«ãŒç„¡åŠ¹åŒ–ã•ã‚Œã‚‹å ´åˆã¯å­ãƒ­ãƒ¼ãƒ«ã‚‚ç„¡åŠ¹åŒ–
- æœ€å¤§ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã‚’è¶…ãˆã‚‹å‰²ã‚Šå½“ã¦ã¯ä¸å¯
- æœ‰åŠ¹æœŸé–“å¤–ã®ãƒ­ãƒ¼ãƒ«ã¯è‡ªå‹•çš„ã«ç„¡åŠ¹åŒ–
- ãƒ­ãƒ¼ãƒ«å‰Šé™¤æ™‚ã¯é–¢é€£ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ãƒ¼ãƒ«ç´ä»˜ã‘ã‚‚å‰Šé™¤
- ãƒ†ãƒŠãƒ³ãƒˆå›ºæœ‰ãƒ­ãƒ¼ãƒ«ã¯è©²å½“ãƒ†ãƒŠãƒ³ãƒˆå†…ã§ã®ã¿ä½¿ç”¨å¯èƒ½
