# テーブル定義書_SYS_SkillMatrix_スキルマップ

## 基本情報

| 項目 | 内容 |
|------|------|
| テーブル名 | SYS_SkillMatrix |
| 論理名 | スキルマップ |
| 用途 | 組織やプロジェクトにおけるスキル分布状況を可視化するためのデータ管理 |
| カテゴリ | システム系 |
| 作成日 | 2024-12-19 |
| 最終更新日 | 2024-12-19 |

## テーブル概要

スキルマップテーブル（SYS_SkillMatrix）は、組織やプロジェクトにおけるスキル分布状況を可視化するためのデータを管理するシステムテーブルです。
部門別・プロジェクト別のスキル充足率、リスク領域の特定、スキルギャップ分析などの情報を集計・保存し、
戦略的な人材配置や教育計画の立案に活用されます。
このテーブルにより、組織のスキル状況を定量的に把握し、人材育成戦略の策定やリソース配分の最適化を支援します。

## テーブル構造

| # | カラム名 | 論理名 | データ型 | 長さ | NULL | デフォルト | PK | FK | インデックス | 説明 |
|---|----------|--------|----------|------|------|------------|----|----|--------------|------|
| 1 | matrix_id | マップID | VARCHAR | 50 | NOT NULL | - | ○ | - | PK | スキルマップを一意に識別するID |
| 2 | tenant_id | テナントID | VARCHAR | 50 | NOT NULL | - | - | ○ | IDX | テナント識別子 |
| 3 | matrix_name | マップ名 | VARCHAR | 200 | NOT NULL | - | - | - | - | スキルマップの名称 |
| 4 | matrix_type | マップ種別 | VARCHAR | 50 | NOT NULL | - | - | - | IDX | マップの種別（部門/プロジェクト/全社等） |
| 5 | department_id | 対象部署ID | VARCHAR | 50 | NULL | - | - | ○ | IDX | 対象部署（部門マップの場合） |
| 6 | project_name | 対象プロジェクト | VARCHAR | 200 | NULL | - | - | - | - | 対象プロジェクト名（プロジェクトマップの場合） |
| 7 | base_year_month | 基準年月 | VARCHAR | 7 | NOT NULL | - | - | - | IDX | 集計基準年月（YYYY-MM形式） |
| 8 | skill_hierarchy_id | スキル階層ID | VARCHAR | 50 | NOT NULL | - | - | ○ | IDX | 対象スキル階層 |
| 9 | skill_name | スキル名 | VARCHAR | 200 | NOT NULL | - | - | - | - | スキル名 |
| 10 | required_count | 必要人数 | INTEGER | - | NOT NULL | 0 | - | - | - | 必要な人数 |
| 11 | current_count | 現在人数 | INTEGER | - | NOT NULL | 0 | - | - | - | 現在の人数 |
| 12 | level1_count | レベル1人数 | INTEGER | - | NOT NULL | 0 | - | - | - | レベル1（×）の人数 |
| 13 | level2_count | レベル2人数 | INTEGER | - | NOT NULL | 0 | - | - | - | レベル2（△）の人数 |
| 14 | level3_count | レベル3人数 | INTEGER | - | NOT NULL | 0 | - | - | - | レベル3（○）の人数 |
| 15 | level4_count | レベル4人数 | INTEGER | - | NOT NULL | 0 | - | - | - | レベル4（◎）の人数 |
| 16 | fulfillment_rate | 充足率 | DECIMAL | 5,2 | NOT NULL | 0.00 | - | - | - | スキル充足率（%） |
| 17 | risk_level | リスクレベル | VARCHAR | 20 | NOT NULL | 'LOW' | - | - | IDX | リスクレベル（HIGH/MEDIUM/LOW） |
| 18 | avg_skill_level | 平均スキルレベル | DECIMAL | 3,2 | NOT NULL | 0.00 | - | - | - | 平均スキルレベル |
| 19 | remarks | 備考 | TEXT | - | NULL | - | - | - | - | 備考・コメント |
| 20 | aggregated_at | 集計日時 | TIMESTAMP | - | NOT NULL | CURRENT_TIMESTAMP | - | - | - | 集計実行日時 |
| 21 | created_at | 作成日時 | TIMESTAMP | - | NOT NULL | CURRENT_TIMESTAMP | - | - | - | レコード作成日時 |
| 22 | updated_at | 更新日時 | TIMESTAMP | - | NOT NULL | CURRENT_TIMESTAMP | - | - | - | レコード更新日時 |

## リレーション

### 参照先テーブル
- MST_Tenant (tenant_id)
- MST_Department (department_id)
- MST_SkillHierarchy (skill_hierarchy_id)

### 参照元テーブル
- なし（集計・分析専用テーブル）

## データ仕様

### matrix_type（マップ種別）
- DEPARTMENT: 部門別スキルマップ
- PROJECT: プロジェクト別スキルマップ
- COMPANY: 全社スキルマップ
- TEAM: チーム別スキルマップ

### risk_level（リスクレベル）
- HIGH: 充足率60%未満（緊急対応が必要）
- MEDIUM: 充足率60%以上80%未満（注意が必要）
- LOW: 充足率80%以上（問題なし）

### 充足率計算
- 充足率 = (現在人数 / 必要人数) × 100
- 必要人数は部署の業務要件に基づいて設定

### 平均スキルレベル計算
- レベル1（×）= 1点、レベル2（△）= 2点、レベル3（○）= 3点、レベル4（◎）= 4点
- 平均スキルレベル = 総得点 / 総人数

## 運用仕様

### データ保持期間
- 2年間（トレンド分析のため）

### バックアップ
- 日次バックアップ対象
- 月次集計時のバックアップ

### メンテナンス
- 月次での自動集計・更新
- 四半期での精度検証

## パフォーマンス

### 想定レコード数
- 初期: 1,000件
- 1年後: 5,000件
- 3年後: 15,000件

### アクセスパターン
- 部門別マップ参照: 高頻度
- リスク分析: 中頻度
- トレンド分析: 低頻度

### インデックス設計
- PRIMARY KEY: matrix_id
- INDEX: tenant_id, matrix_type, department_id
- INDEX: base_year_month, skill_hierarchy_id
- INDEX: risk_level
- COMPOSITE INDEX: matrix_type, base_year_month, department_id

## セキュリティ

### アクセス制御
- 参照: 管理者、部門長、人事担当者
- 更新: システムバッチのみ
- 削除: システム管理者のみ

### 機密情報
- 組織のスキル状況の機密性確保
- 部門間の比較データの適切な管理

## 移行仕様

### 初期データ
- TRN_SkillRecordからの集計データ生成
- 部門・プロジェクト情報との結合

### データ移行
- 月次バッチによる自動生成
- 履歴データの段階的移行

## 特記事項

### 制約事項
- 人数は0以上の値のみ
- 充足率は0.00以上100.00以下
- 平均スキルレベルは1.00以上4.00以下
- 直接更新は禁止（バッチ処理のみ）

### 拡張予定
- AI予測機能の追加
- スキルギャップ自動分析
- 人材配置最適化機能

### 関連システム
- スキル管理システム
- 人事管理システム
- プロジェクト管理システム
- レポート生成システム
- ダッシュボードシステム

### 可視化機能
- ヒートマップ形式での表示
- Excel/PDF形式でのエクスポート
- グラフィカルなダッシュボード表示
- トレンド分析チャート

### 業務ルール
1. スキルマップは月次で自動生成
2. 部門マップは各部署ごとに作成
3. 全社マップは全部署を統合して作成
4. リスクレベルは充足率に基づいて自動判定
5. 必要人数は部署の業務要件に基づいて設定
