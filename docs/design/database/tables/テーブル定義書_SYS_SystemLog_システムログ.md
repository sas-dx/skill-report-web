# ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©æ›¸: SYS_SystemLog (ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°)

## ğŸ“‹ åŸºæœ¬æƒ…å ±

| é …ç›® | å†…å®¹ |
|------|------|
| ãƒ†ãƒ¼ãƒ–ãƒ«å | SYS_SystemLog |
| è«–ç†å | ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚° |
| ã‚«ãƒ†ã‚´ãƒª | ã‚·ã‚¹ãƒ†ãƒ ç³» |
| ä½œæˆæ—¥ | 2025-06-01 |

> **æ³¨æ„**: æœ¬ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©æ›¸ã¯è‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ã€‚æ‰‹å‹•ç·¨é›†ã¯è¡Œã‚ãªã„ã§ãã ã•ã„ã€‚
> è©³ç´°å®šç¾©ã®å¤‰æ›´ã¯ `table-details/SYS_SystemLog_details.yaml` ã§è¡Œã£ã¦ãã ã•ã„ã€‚



## ğŸ“ ãƒ†ãƒ¼ãƒ–ãƒ«æ¦‚è¦

SYS_SystemLogï¼ˆã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°ï¼‰ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§ç™ºç”Ÿã™ã‚‹ã‚ã‚‰ã‚†ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨˜éŒ²ãƒ»ç®¡ç†ã™ã‚‹ãƒ­ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ã§ã™ã€‚

ä¸»ãªç›®çš„ï¼š
- ã‚·ã‚¹ãƒ†ãƒ é‹ç”¨ç›£è¦–ï¼ˆã‚¨ãƒ©ãƒ¼ã€è­¦å‘Šã€æƒ…å ±ãƒ­ã‚°ã®è¨˜éŒ²ï¼‰
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ï¼ˆèªè¨¼ã€ã‚¢ã‚¯ã‚»ã‚¹ã€æ“ä½œå±¥æ­´ã®è¿½è·¡ï¼‰
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã€å‡¦ç†æ™‚é–“ã®æ¸¬å®šï¼‰
- éšœå®³èª¿æŸ»ãƒ»ãƒ‡ãƒãƒƒã‚°ï¼ˆè©³ç´°ãªã‚¨ãƒ©ãƒ¼æƒ…å ±ã€ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã®ä¿å­˜ï¼‰
- åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ï¼ˆç›¸é–¢IDã«ã‚ˆã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¿½è·¡ï¼‰
- ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹å¯¾å¿œï¼ˆæ³•çš„è¦ä»¶ã«åŸºã¥ããƒ­ã‚°ä¿æŒï¼‰

ã“ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã®å®‰å®šé‹ç”¨ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºä¿ã€å•é¡Œè§£æ±ºã®åŸºç›¤ã¨ãªã‚‹é‡è¦ãªãƒ­ã‚°ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚
å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®åŠ¹ç‡çš„ãªç®¡ç†ã®ãŸã‚ã€æœˆæ¬¡ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ†å‰²ã¨è‡ªå‹•ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚


## ğŸ—‚ï¸ ã‚«ãƒ©ãƒ å®šç¾©

| ã‚«ãƒ©ãƒ å | è«–ç†å | ãƒ‡ãƒ¼ã‚¿å‹ | æ¡æ•° | NULL | PK | FK | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|----------|--------|----------|------|------|----|----|------------|------|
| id | ID | VARCHAR | 50 | Ã— | â— |  |  | ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ï¼ˆUUIDï¼‰ |
| is_deleted | å‰Šé™¤ãƒ•ãƒ©ã‚° | BOOLEAN |  | Ã— |  |  |  | è«–ç†å‰Šé™¤ãƒ•ãƒ©ã‚° |
| log_level | ãƒ­ã‚°ãƒ¬ãƒ™ãƒ« | ENUM |  | â—‹ |  |  |  | ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ï¼ˆERROR:ã‚¨ãƒ©ãƒ¼ã€WARN:è­¦å‘Šã€INFO:æƒ…å ±ã€DEBUG:ãƒ‡ãƒãƒƒã‚°ï¼‰ |
| log_category | ãƒ­ã‚°ã‚«ãƒ†ã‚´ãƒª | VARCHAR | 50 | â—‹ |  |  |  | ãƒ­ã‚°ã®ã‚«ãƒ†ã‚´ãƒªï¼ˆAUTH:èªè¨¼ã€API:APIã€BATCH:ãƒãƒƒãƒã€SYSTEM:ã‚·ã‚¹ãƒ†ãƒ ï¼‰ |
| message | ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | TEXT |  | â—‹ |  |  |  | ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹ |
| user_id | å®Ÿè¡Œãƒ¦ãƒ¼ã‚¶ãƒ¼ID | VARCHAR | 50 | â—‹ |  | â— |  | ãƒ­ã‚°ã‚’ç™ºç”Ÿã•ã›ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®IDï¼ˆMST_UserAuthã¸ã®å¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| session_id | ã‚»ãƒƒã‚·ãƒ§ãƒ³ID | VARCHAR | 100 | â—‹ |  |  |  | ã‚»ãƒƒã‚·ãƒ§ãƒ³IDï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®è­˜åˆ¥ï¼‰ |
| ip_address | IPã‚¢ãƒ‰ãƒ¬ã‚¹ | VARCHAR | 45 | â—‹ |  |  |  | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆIPv4/IPv6å¯¾å¿œï¼‰ |
| user_agent | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | TEXT |  | â—‹ |  |  |  | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæƒ…å ± |
| request_url | ãƒªã‚¯ã‚¨ã‚¹ãƒˆURL | TEXT |  | â—‹ |  |  |  | ãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚ŒãŸURL |
| request_method | HTTPãƒ¡ã‚½ãƒƒãƒ‰ | VARCHAR | 10 | â—‹ |  |  |  | HTTPãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆGETã€POSTã€PUTã€DELETEç­‰ï¼‰ |
| response_status | ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | INT |  | â—‹ |  |  |  | HTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ |
| response_time | ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ | INT |  | â—‹ |  |  |  | ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ï¼ˆãƒŸãƒªç§’ï¼‰ |
| error_code | ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ | VARCHAR | 20 | â—‹ |  |  |  | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ã®ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ |
| stack_trace | ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ | TEXT |  | â—‹ |  |  |  | ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ |
| request_body | ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ | TEXT |  | â—‹ |  |  |  | ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ï¼ˆå€‹äººæƒ…å ±å«ã‚€å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚æš—å·åŒ–ï¼‰ |
| response_body | ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ | TEXT |  | â—‹ |  |  |  | ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ï¼ˆå€‹äººæƒ…å ±å«ã‚€å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚æš—å·åŒ–ï¼‰ |
| correlation_id | ç›¸é–¢ID | VARCHAR | 100 | â—‹ |  |  |  | åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ã§ã®ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ç”¨ç›¸é–¢ID |
| component_name | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå | VARCHAR | 100 | â—‹ |  |  |  | ãƒ­ã‚°ã‚’å‡ºåŠ›ã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå |
| thread_name | ã‚¹ãƒ¬ãƒƒãƒ‰å | VARCHAR | 100 | â—‹ |  |  |  | ãƒ­ã‚°ã‚’å‡ºåŠ›ã—ãŸã‚¹ãƒ¬ãƒƒãƒ‰å |
| server_name | ã‚µãƒ¼ãƒãƒ¼å | VARCHAR | 100 | â—‹ |  |  |  | ãƒ­ã‚°ã‚’å‡ºåŠ›ã—ãŸã‚µãƒ¼ãƒãƒ¼å |
| created_at | ä½œæˆæ—¥æ™‚ | TIMESTAMP |  | Ã— |  |  | CURRENT_TIMESTAMP | ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆæ—¥æ™‚ |
| updated_at | æ›´æ–°æ—¥æ™‚ | TIMESTAMP |  | Ã— |  |  | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | ãƒ¬ã‚³ãƒ¼ãƒ‰æ›´æ–°æ—¥æ™‚ |
| created_by | ä½œæˆè€… | VARCHAR | 50 | Ã— |  |  |  | ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆè€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| updated_by | æ›´æ–°è€… | VARCHAR | 50 | Ã— |  |  |  | ãƒ¬ã‚³ãƒ¼ãƒ‰æ›´æ–°è€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |

## ğŸ” ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å®šç¾©

| ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å | ã‚«ãƒ©ãƒ  | ãƒ¦ãƒ‹ãƒ¼ã‚¯ | èª¬æ˜ |
|----------------|--------|----------|------|
| idx_log_level | log_level | Ã— | ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«åˆ¥æ¤œç´¢ç”¨ |
| idx_log_category | log_category | Ã— | ãƒ­ã‚°ã‚«ãƒ†ã‚´ãƒªåˆ¥æ¤œç´¢ç”¨ |
| idx_user_id | user_id | Ã— | ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥æ¤œç´¢ç”¨ |
| idx_session_id | session_id | Ã— | ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ¥æ¤œç´¢ç”¨ |
| idx_ip_address | ip_address | Ã— | IPã‚¢ãƒ‰ãƒ¬ã‚¹åˆ¥æ¤œç´¢ç”¨ |
| idx_error_code | error_code | Ã— | ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰åˆ¥æ¤œç´¢ç”¨ |
| idx_correlation_id | correlation_id | Ã— | ç›¸é–¢IDåˆ¥æ¤œç´¢ç”¨ |
| idx_component | component_name | Ã— | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥æ¤œç´¢ç”¨ |
| idx_server | server_name | Ã— | ã‚µãƒ¼ãƒãƒ¼åˆ¥æ¤œç´¢ç”¨ |
| idx_response_time | response_time | Ã— | ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“æ¤œç´¢ç”¨ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æï¼‰ |
| idx_created_at_level | created_at, log_level | Ã— | æ—¥æ™‚ãƒ»ãƒ¬ãƒ™ãƒ«è¤‡åˆæ¤œç´¢ç”¨ |

## ğŸ”’ åˆ¶ç´„å®šç¾©

| åˆ¶ç´„å | åˆ¶ç´„ã‚¿ã‚¤ãƒ— | å¯¾è±¡ã‚«ãƒ©ãƒ  | æ¡ä»¶ | èª¬æ˜ |
|--------|------------|------------|------|------|
| chk_log_level | CHECK |  | log_level IN ('ERROR', 'WARN', 'INFO', 'DEBUG') | ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«å€¤ãƒã‚§ãƒƒã‚¯åˆ¶ç´„ |
| chk_response_status | CHECK |  | response_status IS NULL OR (response_status >= 100 AND response_status <= 599) | HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰å€¤ãƒã‚§ãƒƒã‚¯åˆ¶ç´„ |
| chk_response_time | CHECK |  | response_time IS NULL OR response_time >= 0 | ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“éè² å€¤ãƒã‚§ãƒƒã‚¯åˆ¶ç´„ |

## ğŸ”— å¤–éƒ¨ã‚­ãƒ¼é–¢ä¿‚

| å¤–éƒ¨ã‚­ãƒ¼å | ã‚«ãƒ©ãƒ  | å‚ç…§ãƒ†ãƒ¼ãƒ–ãƒ« | å‚ç…§ã‚«ãƒ©ãƒ  | æ›´æ–°æ™‚ | å‰Šé™¤æ™‚ | èª¬æ˜ |
|------------|--------|--------------|------------|--------|--------|------|
| fk_log_user | user_id | MST_UserAuth | user_id | CASCADE | SET NULL | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®å¤–éƒ¨ã‚­ãƒ¼ |

## ğŸ“Š ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿

```json
[
  {
    "log_level": "INFO",
    "log_category": "AUTH",
    "message": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ",
    "user_id": "user001",
    "session_id": "sess_abc123",
    "ip_address": "192.168.1.100",
    "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",
    "request_url": "/api/auth/login",
    "request_method": "POST",
    "response_status": 200,
    "response_time": 150,
    "error_code": null,
    "stack_trace": null,
    "correlation_id": "corr_xyz789",
    "component_name": "AuthService",
    "thread_name": "http-nio-8080-exec-1",
    "server_name": "app-server-01"
  },
  {
    "log_level": "ERROR",
    "log_category": "API",
    "message": "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼",
    "user_id": "user002",
    "session_id": "sess_def456",
    "ip_address": "192.168.1.101",
    "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36",
    "request_url": "/api/employees",
    "request_method": "GET",
    "response_status": 500,
    "response_time": 5000,
    "error_code": "DB_CONNECTION_ERROR",
    "stack_trace": "java.sql.SQLException: Connection timeout...",
    "correlation_id": "corr_abc456",
    "component_name": "EmployeeService",
    "thread_name": "http-nio-8080-exec-2",
    "server_name": "app-server-02"
  }
]
```

## ğŸ“Œ ç‰¹è¨˜äº‹é …

- å¤§é‡ã®ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ãŒè“„ç©ã•ã‚Œã‚‹ãŸã‚ã€å®šæœŸçš„ãªã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãŒå¿…è¦
- å€‹äººæƒ…å ±ã‚’å«ã‚€å¯èƒ½æ€§ãŒã‚ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ã¯æš—å·åŒ–
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æã®ãŸã‚ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã‚’è¨˜éŒ²
- åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ã§ã®ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ã®ãŸã‚ç›¸é–¢IDã‚’ä½¿ç”¨
- ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã«ã‚ˆã‚‹æ¤œç´¢é »åº¦ãŒé«˜ã„ãŸã‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–
- å¤ã„ãƒ­ã‚°ã¯è‡ªå‹•çš„ã«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ï¼ˆ6ãƒ¶æœˆçµŒéå¾Œï¼‰

## ğŸ“‹ æ¥­å‹™ãƒ«ãƒ¼ãƒ«

- ERRORãƒ¬ãƒ™ãƒ«ã®ãƒ­ã‚°ã¯å³åº§ã«ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥
- WARNãƒ¬ãƒ™ãƒ«ã®ãƒ­ã‚°ã¯æ—¥æ¬¡ã§ç›£è¦–ãƒ»åˆ†æ
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ãŒ5ç§’ã‚’è¶…ãˆã‚‹å ´åˆã¯è‡ªå‹•çš„ã«WARNãƒ­ã‚°å‡ºåŠ›
- å€‹äººæƒ…å ±ã‚’å«ã‚€ãƒ­ã‚°ã¯æš—å·åŒ–ã—ã¦ä¿å­˜
- ãƒ­ã‚°ä¿æŒæœŸé–“ã¯6ãƒ¶æœˆï¼ˆæ³•çš„è¦ä»¶ã«å¿œã˜ã¦èª¿æ•´ï¼‰
- ã‚·ã‚¹ãƒ†ãƒ éšœå®³æ™‚ã®èª¿æŸ»ã®ãŸã‚è©³ç´°ãƒ­ã‚°ã‚’ä¿æŒ
- ç›¸é–¢IDã«ã‚ˆã‚Šãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å…¨ä½“ãƒ•ãƒ­ãƒ¼ã‚’è¿½è·¡å¯èƒ½
