# ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©æ›¸: MST_SkillHierarchy (ã‚¹ã‚­ãƒ«éšŽå±¤ãƒžã‚¹ã‚¿)

## ðŸ“‹ åŸºæœ¬æƒ…å ±

| é …ç›® | å†…å®¹ |
|------|------|
| ãƒ†ãƒ¼ãƒ–ãƒ«å | MST_SkillHierarchy |
| è«–ç†å | ã‚¹ã‚­ãƒ«éšŽå±¤ãƒžã‚¹ã‚¿ |
| ã‚«ãƒ†ã‚´ãƒª | ãƒžã‚¹ã‚¿ç³» |
| ä½œæˆæ—¥ | 2025-06-01 |

> **æ³¨æ„**: æœ¬ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©æ›¸ã¯è‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ã€‚æ‰‹å‹•ç·¨é›†ã¯è¡Œã‚ãªã„ã§ãã ã•ã„ã€‚
> è©³ç´°å®šç¾©ã®å¤‰æ›´ã¯ `table-details/MST_SkillHierarchy_details.yaml` ã§è¡Œã£ã¦ãã ã•ã„ã€‚


## ðŸ“ æ”¹ç‰ˆå±¥æ­´

> **æ³¨æ„**: æ”¹ç‰ˆå±¥æ­´ã®è©³ç´°ã¯ä»¥ä¸‹ã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ï¼š
> `table-details/TABLE_NAME_details.yaml`

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ›´æ–°æ—¥ | æ›´æ–°è€… | ä¸»ãªå¤‰æ›´å†…å®¹ |
|------------|--------|--------|-------------|
| 1.0.0 | 2025-06-01 | é–‹ç™ºãƒãƒ¼ãƒ  | åˆç‰ˆä½œæˆ - ã‚¹ã‚­ãƒ«éšŽå±¤ãƒžã‚¹ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«ã®è©³ç´°å®šç¾© |


## ðŸ“ ãƒ†ãƒ¼ãƒ–ãƒ«æ¦‚è¦

MST_SkillHierarchyï¼ˆã‚¹ã‚­ãƒ«éšŽå±¤ãƒžã‚¹ã‚¿ï¼‰ã¯ã€ã‚¹ã‚­ãƒ«é …ç›®é–“ã®éšŽå±¤é–¢ä¿‚ã‚’ç®¡ç†ã™ã‚‹ãƒžã‚¹ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«ã§ã™ã€‚

ä¸»ãªç›®çš„ï¼š
- ã‚¹ã‚­ãƒ«ã®è¦ªå­é–¢ä¿‚ãƒ»éšŽå±¤æ§‹é€ ã®ç®¡ç†
- ã‚¹ã‚­ãƒ«åˆ†é¡žã®ä½“ç³»åŒ–ï¼ˆå¤§åˆ†é¡žâ†’ä¸­åˆ†é¡žâ†’å°åˆ†é¡žï¼‰
- ã‚¹ã‚­ãƒ«æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®åŸºç›¤æä¾›
- ã‚¹ã‚­ãƒ«ãƒžãƒƒãƒ—ãƒ»ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼ã®è¡¨ç¤ºæ”¯æ´
- é–¢é€£ã‚¹ã‚­ãƒ«ã®æŽ¨è–¦æ©Ÿèƒ½ã®åŸºç›¤

ã“ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚ˆã‚Šã€æŠ€è¡“ã‚¹ã‚­ãƒ«ã€ãƒ“ã‚¸ãƒã‚¹ã‚¹ã‚­ãƒ«ã€è³‡æ ¼ç­‰ã‚’ä½“ç³»çš„ã«åˆ†é¡žã—ã€
ç¤¾å“¡ã®ã‚¹ã‚­ãƒ«ç®¡ç†ã‚’åŠ¹çŽ‡çš„ã«è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚


## ðŸ—‚ï¸ ã‚«ãƒ©ãƒ å®šç¾©

| ã‚«ãƒ©ãƒ å | è«–ç†å | ãƒ‡ãƒ¼ã‚¿åž‹ | æ¡æ•° | NULL | PK | FK | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜Ž |
|----------|--------|----------|------|------|----|----|------------|------|
| id | ID | VARCHAR | 50 | Ã— | â— |  |  | ãƒ—ãƒ©ã‚¤ãƒžãƒªã‚­ãƒ¼ï¼ˆUUIDï¼‰ |
| is_deleted | å‰Šé™¤ãƒ•ãƒ©ã‚° | BOOLEAN |  | Ã— |  |  |  | è«–ç†å‰Šé™¤ãƒ•ãƒ©ã‚° |
| tenant_id | ãƒ†ãƒŠãƒ³ãƒˆID | VARCHAR | 50 | Ã— |  |  |  | ãƒžãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆè­˜åˆ¥å­ |
| skill_id | ã‚¹ã‚­ãƒ«ID | VARCHAR | 50 | â—‹ |  | â— |  | ã‚¹ã‚­ãƒ«é …ç›®ã®IDï¼ˆMST_SkillItemã¸ã®å¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| parent_skill_id | è¦ªã‚¹ã‚­ãƒ«ID | VARCHAR | 50 | â—‹ |  | â— |  | è¦ªã‚¹ã‚­ãƒ«ã®IDï¼ˆMST_SkillHierarchyã¸ã®è‡ªå·±å‚ç…§å¤–éƒ¨ã‚­ãƒ¼ã€NULLã®å ´åˆã¯ãƒ«ãƒ¼ãƒˆã‚¹ã‚­ãƒ«ï¼‰ |
| hierarchy_level | éšŽå±¤ãƒ¬ãƒ™ãƒ« | INTEGER |  | â—‹ |  |  |  | éšŽå±¤ã®æ·±ã•ï¼ˆ1:å¤§åˆ†é¡žã€2:ä¸­åˆ†é¡žã€3:å°åˆ†é¡žã€æœ€å¤§5éšŽå±¤ã¾ã§ï¼‰ |
| skill_path | ã‚¹ã‚­ãƒ«ãƒ‘ã‚¹ | VARCHAR | 500 | â—‹ |  |  |  | ãƒ«ãƒ¼ãƒˆã‹ã‚‰ã®ã‚¹ã‚­ãƒ«ãƒ‘ã‚¹ï¼ˆä¾‹ï¼š/æŠ€è¡“ã‚¹ã‚­ãƒ«/ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°/Javaï¼‰ |
| sort_order | è¡¨ç¤ºé †åº | INTEGER |  | â—‹ |  |  |  | åŒä¸€éšŽå±¤å†…ã§ã®è¡¨ç¤ºé †åº |
| is_leaf | æœ«ç«¯ãƒ•ãƒ©ã‚° | BOOLEAN |  | â—‹ |  |  | True | æœ«ç«¯ãƒŽãƒ¼ãƒ‰ï¼ˆå­ã‚’æŒãŸãªã„ï¼‰ã‹ã©ã†ã‹ |
| skill_category | ã‚¹ã‚­ãƒ«ã‚«ãƒ†ã‚´ãƒª | ENUM |  | â—‹ |  |  |  | ã‚¹ã‚­ãƒ«ã®å¤§åˆ†é¡žï¼ˆTECHNICAL:æŠ€è¡“ã€BUSINESS:ãƒ“ã‚¸ãƒã‚¹ã€CERTIFICATION:è³‡æ ¼ã€SOFT:ã‚½ãƒ•ãƒˆã‚¹ã‚­ãƒ«ï¼‰ |
| description | èª¬æ˜Ž | TEXT |  | â—‹ |  |  |  | ã‚¹ã‚­ãƒ«éšŽå±¤ã®è©³ç´°èª¬æ˜Ž |
| is_active | æœ‰åŠ¹ãƒ•ãƒ©ã‚° | BOOLEAN |  | â—‹ |  |  | True | éšŽå±¤ãŒæœ‰åŠ¹ã‹ã©ã†ã‹ |
| created_at | ä½œæˆæ—¥æ™‚ | TIMESTAMP |  | Ã— |  |  | CURRENT_TIMESTAMP | ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆæ—¥æ™‚ |
| updated_at | æ›´æ–°æ—¥æ™‚ | TIMESTAMP |  | Ã— |  |  | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | ãƒ¬ã‚³ãƒ¼ãƒ‰æ›´æ–°æ—¥æ™‚ |
| created_by | ä½œæˆè€… | VARCHAR | 50 | Ã— |  |  |  | ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆè€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| updated_by | æ›´æ–°è€… | VARCHAR | 50 | Ã— |  |  |  | ãƒ¬ã‚³ãƒ¼ãƒ‰æ›´æ–°è€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |

## ðŸ” ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å®šç¾©

| ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å | ã‚«ãƒ©ãƒ  | ãƒ¦ãƒ‹ãƒ¼ã‚¯ | èª¬æ˜Ž |
|----------------|--------|----------|------|
| idx_skill_id | skill_id | Ã— | ã‚¹ã‚­ãƒ«IDæ¤œç´¢ç”¨ |
| idx_parent_skill | parent_skill_id | Ã— | è¦ªã‚¹ã‚­ãƒ«æ¤œç´¢ç”¨ |
| idx_hierarchy_level | hierarchy_level | Ã— | éšŽå±¤ãƒ¬ãƒ™ãƒ«æ¤œç´¢ç”¨ |
| idx_skill_path | skill_path | Ã— | ã‚¹ã‚­ãƒ«ãƒ‘ã‚¹æ¤œç´¢ç”¨ |
| idx_category_level | skill_category, hierarchy_level | Ã— | ã‚«ãƒ†ã‚´ãƒªåˆ¥éšŽå±¤æ¤œç´¢ç”¨ |
| idx_parent_sort | parent_skill_id, sort_order | Ã— | è¦ªã‚¹ã‚­ãƒ«å†…ã§ã®é †åºæ¤œç´¢ç”¨ |

## ðŸ”’ åˆ¶ç´„å®šç¾©

| åˆ¶ç´„å | åˆ¶ç´„ã‚¿ã‚¤ãƒ— | å¯¾è±¡ã‚«ãƒ©ãƒ  | æ¡ä»¶ | èª¬æ˜Ž |
|--------|------------|------------|------|------|
| uk_skill_hierarchy | UNIQUE | skill_id, parent_skill_id |  | ã‚¹ã‚­ãƒ«ã¨è¦ªã‚¹ã‚­ãƒ«ã®çµ„ã¿åˆã‚ã›ä¸€æ„åˆ¶ç´„ |
| chk_hierarchy_level | CHECK |  | hierarchy_level >= 1 AND hierarchy_level <= 5 | éšŽå±¤ãƒ¬ãƒ™ãƒ«ç¯„å›²ãƒã‚§ãƒƒã‚¯åˆ¶ç´„ |
| chk_skill_category | CHECK |  | skill_category IN ('TECHNICAL', 'BUSINESS', 'CERTIFICATION', 'SOFT') | ã‚¹ã‚­ãƒ«ã‚«ãƒ†ã‚´ãƒªå€¤ãƒã‚§ãƒƒã‚¯åˆ¶ç´„ |
| chk_no_self_reference | CHECK |  | skill_id != parent_skill_id | è‡ªå·±å‚ç…§é˜²æ­¢åˆ¶ç´„ |

## ðŸ”— å¤–éƒ¨ã‚­ãƒ¼é–¢ä¿‚

| å¤–éƒ¨ã‚­ãƒ¼å | ã‚«ãƒ©ãƒ  | å‚ç…§ãƒ†ãƒ¼ãƒ–ãƒ« | å‚ç…§ã‚«ãƒ©ãƒ  | æ›´æ–°æ™‚ | å‰Šé™¤æ™‚ | èª¬æ˜Ž |
|------------|--------|--------------|------------|--------|--------|------|
| fk_hierarchy_skill | skill_id | MST_SkillItem | id | CASCADE | CASCADE | ã‚¹ã‚­ãƒ«é …ç›®ã¸ã®å¤–éƒ¨ã‚­ãƒ¼ |
| fk_hierarchy_parent | parent_skill_id | MST_SkillHierarchy | skill_id | CASCADE | CASCADE | è¦ªã‚¹ã‚­ãƒ«ã¸ã®è‡ªå·±å‚ç…§å¤–éƒ¨ã‚­ãƒ¼ |

## ðŸ“Š ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿

```json
[
  {
    "skill_id": "SKILL_TECH_001",
    "parent_skill_id": null,
    "hierarchy_level": 1,
    "skill_path": "/æŠ€è¡“ã‚¹ã‚­ãƒ«",
    "sort_order": 1,
    "is_leaf": false,
    "skill_category": "TECHNICAL",
    "description": "æŠ€è¡“ç³»ã‚¹ã‚­ãƒ«ã®å¤§åˆ†é¡ž",
    "is_active": true
  },
  {
    "skill_id": "SKILL_PROG_001",
    "parent_skill_id": "SKILL_TECH_001",
    "hierarchy_level": 2,
    "skill_path": "/æŠ€è¡“ã‚¹ã‚­ãƒ«/ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°",
    "sort_order": 1,
    "is_leaf": false,
    "skill_category": "TECHNICAL",
    "description": "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªžãƒ»æŠ€è¡“",
    "is_active": true
  },
  {
    "skill_id": "SKILL_JAVA_001",
    "parent_skill_id": "SKILL_PROG_001",
    "hierarchy_level": 3,
    "skill_path": "/æŠ€è¡“ã‚¹ã‚­ãƒ«/ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°/Java",
    "sort_order": 1,
    "is_leaf": true,
    "skill_category": "TECHNICAL",
    "description": "Javaè¨€èªžã§ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚¹ã‚­ãƒ«",
    "is_active": true
  }
]
```

## ðŸ“Œ ç‰¹è¨˜äº‹é …

- éšŽå±¤ã®æœ€å¤§æ·±åº¦ã¯5éšŽå±¤ã¾ã§åˆ¶é™
- å¾ªç’°å‚ç…§ã‚’é˜²ããŸã‚ã€è‡ªå·±å‚ç…§ãƒã‚§ãƒƒã‚¯åˆ¶ç´„ã‚’è¨­å®š
- ã‚¹ã‚­ãƒ«ãƒ‘ã‚¹ã¯æ¤œç´¢ãƒ»è¡¨ç¤ºç”¨ã«äº‹å‰è¨ˆç®—ã—ã¦æ ¼ç´
- is_leafãƒ•ãƒ©ã‚°ã¯å­ãƒŽãƒ¼ãƒ‰è¿½åŠ æ™‚ã«è‡ªå‹•æ›´æ–°
- è«–ç†å‰Šé™¤ã¯ is_active ãƒ•ãƒ©ã‚°ã§ç®¡ç†
- éšŽå±¤å¤‰æ›´æ™‚ã¯é–¢é€£ã™ã‚‹å­ãƒŽãƒ¼ãƒ‰ã®ãƒ‘ã‚¹æ›´æ–°ãŒå¿…è¦

## ðŸ“‹ æ¥­å‹™ãƒ«ãƒ¼ãƒ«

- ãƒ«ãƒ¼ãƒˆã‚¹ã‚­ãƒ«ï¼ˆparent_skill_id = NULLï¼‰ã¯å„ã‚«ãƒ†ã‚´ãƒªã«1ã¤ã¾ã§
- éšŽå±¤ãƒ¬ãƒ™ãƒ«ã¯è¦ªã®éšŽå±¤ãƒ¬ãƒ™ãƒ« + 1 ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹
- ã‚¹ã‚­ãƒ«ãƒ‘ã‚¹ã¯è¦ªã®ãƒ‘ã‚¹ + '/' + è‡ªã‚¹ã‚­ãƒ«åã§æ§‹æˆ
- å­ãƒŽãƒ¼ãƒ‰ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€is_leaf = false ã«è‡ªå‹•æ›´æ–°
- éšŽå±¤å‰Šé™¤æ™‚ã¯å­ãƒŽãƒ¼ãƒ‰ã‚‚å«ã‚ã¦è«–ç†å‰Šé™¤
- åŒä¸€è¦ªå†…ã§ã®è¡¨ç¤ºé †åºã¯é‡è¤‡å¯èƒ½ã ãŒã€é€£ç•ªæŽ¨å¥¨
- ã‚¹ã‚­ãƒ«ã‚«ãƒ†ã‚´ãƒªã¯éšŽå±¤å…¨ä½“ã§çµ±ä¸€ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
