# ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å®Ÿè£…è¨ˆç”»

---

## ğŸ“‹ æ–‡æ›¸æƒ…å ±

| é …ç›® | å†…å®¹ |
|------|------|
| æ–‡æ›¸å | ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å®Ÿè£…è¨ˆç”» |
| ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå | å¹´é–“ã‚¹ã‚­ãƒ«å ±å‘Šæ›¸WEBåŒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ |
| ã‚·ã‚¹ãƒ†ãƒ å | ã‚¹ã‚­ãƒ«å ±å‘Šæ›¸ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆSRMSï¼‰ |
| ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID | SAS-DX-AI-2025-001 |
| ä½œæˆè€… | AIæ¨é€²ãƒãƒ¼ãƒ  |
| ä½œæˆæ—¥ | 2025å¹´11æœˆ6æ—¥ |
| æœ€çµ‚æ›´æ–°æ—¥ | 2025å¹´11æœˆ6æ—¥ |
| ç‰ˆæ•° | 1.0 |

---

## ğŸ¯ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

æœ¬å®Ÿè£…è¨ˆç”»ã¯ã€ä»¥ä¸‹ã®8ã¤ã®å…ˆé€²çš„ãªãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’çµ±åˆã—ãŸ**ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**ã«ã‚ˆã‚Šã€é«˜å“è³ªãƒ»é«˜åŠ¹ç‡ãƒ»é«˜ä¿å®ˆæ€§ã®ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–åŸºç›¤ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

### çµ±åˆãƒ‘ã‚¿ãƒ¼ãƒ³ä¸€è¦§

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | ç›®çš„ | ãƒ•ã‚§ãƒ¼ã‚º | å„ªå…ˆåº¦ |
|---------|------|---------|--------|
| **A: Test Data Builder** | ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†ã®æŸ”è»Ÿæ€§å‘ä¸Š | Phase 1 | â˜…â˜…â˜…â˜…â˜… |
| **B: BDD/Cucumber** | ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã¨ãƒ†ã‚¹ãƒˆã®ç›´æ¥é€£æº | Phase 3 | â˜…â˜…â˜…â˜…â˜† |
| **C: Visual Regression** | UIå¤‰æ›´ã®è‡ªå‹•æ¤œå‡ºã¨ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ | Phase 1 | â˜…â˜…â˜…â˜…â˜… |
| **D: Distributed Testing** | å¤§è¦æ¨¡ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã®ä¸¦åˆ—å®Ÿè¡Œ | Phase 3 | â˜…â˜…â˜…â˜†â˜† |
| **E: Chaos Engineering** | éšœå®³æ™‚ã®æŒ™å‹•æ¤œè¨¼ | Phase 2 | â˜…â˜…â˜…â˜…â˜† |
| **F: Versioned Test Data** | ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç† | Phase 1 | â˜…â˜…â˜…â˜…â˜… |
| **G: AI Maintenance** | AIã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆè‡ªå‹•ä¿å®ˆ | Phase 2 | â˜…â˜…â˜…â˜…â˜… |
| **H: Multi-Tenancy** | ãƒ†ãƒŠãƒ³ãƒˆåˆ†é›¢ã¨ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ | Phase 3 | â˜…â˜…â˜…â˜†â˜† |

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
skill-report-web/
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ e2e/
â”‚   â”‚   â”œâ”€â”€ scenarios/              # ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ login.spec.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ skill/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ crud.spec.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ export.spec.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ career/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ planning.spec.ts
â”‚   â”‚   â”‚   â””â”€â”€ report/
â”‚   â”‚   â”‚       â””â”€â”€ generation.spec.ts
â”‚   â”‚   â”œâ”€â”€ page-objects/          # ãƒšãƒ¼ã‚¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ base/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BasePage.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ BaseComponent.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginPage.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ SkillManagementPage.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ CareerPlanningPage.ts
â”‚   â”‚   â”‚   â””â”€â”€ DashboardPage.ts
â”‚   â”‚   â”œâ”€â”€ builders/              # Test Data Builder (Phase 1)
â”‚   â”‚   â”‚   â”œâ”€â”€ SkillBuilder.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ UserBuilder.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ CareerGoalBuilder.ts
â”‚   â”‚   â”‚   â””â”€â”€ ProjectRecordBuilder.ts
â”‚   â”‚   â”œâ”€â”€ fixtures/              # ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£
â”‚   â”‚   â”‚   â”œâ”€â”€ skills.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ users.ts
â”‚   â”‚   â”‚   â””â”€â”€ projects.ts
â”‚   â”‚   â”œâ”€â”€ utils/                 # ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ database.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ batch.ts
â”‚   â”‚   â”‚   â””â”€â”€ api-client.ts
â”‚   â”‚   â”œâ”€â”€ visual/                # Visual Regression (Phase 1)
â”‚   â”‚   â”‚   â”œâ”€â”€ snapshots/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ skill-card.visual.spec.ts
â”‚   â”‚   â”‚   â””â”€â”€ pages/
â”‚   â”‚   â”‚       â””â”€â”€ skill-management.visual.spec.ts
â”‚   â”‚   â”œâ”€â”€ chaos/                 # Chaos Engineering (Phase 2)
â”‚   â”‚   â”‚   â”œâ”€â”€ network-latency.spec.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ api-failure.spec.ts
â”‚   â”‚   â”‚   â””â”€â”€ database-timeout.spec.ts
â”‚   â”‚   â””â”€â”€ contract/              # Contract Testing
â”‚   â”‚       â””â”€â”€ api-contracts.spec.ts
â”‚   â”œâ”€â”€ features/                  # BDD Features (Phase 3)
â”‚   â”‚   â”œâ”€â”€ skill-management.feature
â”‚   â”‚   â”œâ”€â”€ career-planning.feature
â”‚   â”‚   â””â”€â”€ step-definitions/
â”‚   â”‚       â”œâ”€â”€ skill-steps.ts
â”‚   â”‚       â””â”€â”€ career-steps.ts
â”‚   â”œâ”€â”€ data/                      # Versioned Test Data (Phase 1)
â”‚   â”‚   â”œâ”€â”€ versions/
â”‚   â”‚   â”‚   â”œâ”€â”€ v1.0.0/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ users.json
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ skills.json
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ manifest.json
â”‚   â”‚   â”‚   â””â”€â”€ v1.1.0/
â”‚   â”‚   â”‚       â”œâ”€â”€ users.json
â”‚   â”‚   â”‚       â”œâ”€â”€ skills.json
â”‚   â”‚   â”‚       â””â”€â”€ manifest.json
â”‚   â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â”‚   â””â”€â”€ 001_add_career_goals.ts
â”‚   â”‚   â””â”€â”€ manager.ts
â”‚   â”œâ”€â”€ plans/                     # AIç”Ÿæˆãƒ†ã‚¹ãƒˆè¨ˆç”» (Phase 2)
â”‚   â”‚   â”œâ”€â”€ skill-management.md
â”‚   â”‚   â”œâ”€â”€ career-planning.md
â”‚   â”‚   â””â”€â”€ templates/
â”‚   â”‚       â””â”€â”€ scenario-template.md
â”‚   â”œâ”€â”€ batch/                     # ãƒãƒƒãƒãƒ—ãƒ­ã‚°ãƒ©ãƒ 
â”‚   â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”‚   â”œâ”€â”€ setup-test-data.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ cleanup-test-data.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ skill-export.ts
â”‚   â”‚   â”‚   â””â”€â”€ report-generation.ts
â”‚   â”‚   â”œâ”€â”€ configs/
â”‚   â”‚   â”‚   â””â”€â”€ batch-config.json
â”‚   â”‚   â””â”€â”€ manager.ts
â”‚   â”œâ”€â”€ orchestrator/              # Test Orchestrator (Phase 3)
â”‚   â”‚   â”œâ”€â”€ TestOrchestrator.ts
â”‚   â”‚   â”œâ”€â”€ WorkerPool.ts
â”‚   â”‚   â””â”€â”€ DependencyResolver.ts
â”‚   â”œâ”€â”€ ai-maintenance/            # AI Maintenance (Phase 2)
â”‚   â”‚   â”œâ”€â”€ AITestMaintainer.ts
â”‚   â”‚   â”œâ”€â”€ FailureAnalyzer.ts
â”‚   â”‚   â””â”€â”€ CodeRefactorer.ts
â”‚   â””â”€â”€ multi-tenant/              # Multi-Tenancy (Phase 3)
â”‚       â”œâ”€â”€ TenantContext.ts
â”‚       â””â”€â”€ TenantIsolation.spec.ts
â”œâ”€â”€ playwright.config.ts           # Playwrightè¨­å®š
â”œâ”€â”€ playwright-agents.config.ts    # Playwright Agentsè¨­å®š
â”œâ”€â”€ cucumber.config.ts             # Cucumberè¨­å®š (Phase 3)
â””â”€â”€ package.json
```

---

## ğŸš€ Phase 1: åŸºç¤æ§‹ç¯‰ï¼ˆWeek 1-2ï¼‰

### å®Ÿè£…å†…å®¹

#### 1. Test Data Builder ãƒ‘ã‚¿ãƒ¼ãƒ³
#### 2. Visual Regression Testing
#### 3. Versioned Test Data Management

### ğŸ“¦ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# Phase 1 å¿…é ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
npm install -D @playwright/test@^1.56.0
npm install -D @faker-js/faker
npm install -D @axe-core/playwright
npm install -D pixelmatch
npm install -D dotenv

# Playwright Agents ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
npx playwright init-agents --loop=claude

# ãƒ–ãƒ©ã‚¦ã‚¶ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npx playwright install --with-deps
```

### ğŸ“ å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

#### 1.1 Test Data Builder

```typescript
// tests/e2e/builders/SkillBuilder.ts
import { faker } from '@faker-js/faker'
import { Skill, SkillLevel } from '@/types'
import { apiClient } from '../utils/api-client'

export class SkillBuilder {
  private data: Partial<Skill> = {
    categoryId: 1,
    level: 'â—‹',
    experience: 1,
    lastUsedDate: new Date()
  }

  withName(name: string): this {
    this.data.name = name
    return this
  }

  withCategory(categoryId: number): this {
    this.data.categoryId = categoryId
    return this
  }

  withLevel(level: SkillLevel): this {
    this.data.level = level
    return this
  }

  withExperience(years: number): this {
    this.data.experience = years
    return this
  }

  withRandomData(): this {
    this.data.name = faker.word.noun()
    this.data.level = faker.helpers.arrayElement(['â—', 'â—‹', 'â–³'] as SkillLevel[])
    this.data.experience = faker.number.int({ min: 1, max: 10 })
    return this
  }

  async build(): Promise<Skill> {
    const skillData = {
      name: this.data.name || faker.word.noun(),
      categoryId: this.data.categoryId!,
      level: this.data.level!,
      experience: this.data.experience!,
      lastUsedDate: this.data.lastUsedDate
    }

    return await apiClient.post<Skill>('/api/skills', skillData)
  }

  async buildMany(count: number): Promise<Skill[]> {
    const promises = Array.from({ length: count }, () => 
      this.withRandomData().build()
    )
    return Promise.all(promises)
  }

  buildData(): Partial<Skill> {
    return { ...this.data }
  }
}
```

```typescript
// tests/e2e/builders/UserBuilder.ts
import { faker } from '@faker-js/faker'
import { User } from '@/types'
import { apiClient } from '../utils/api-client'

export class UserBuilder {
  private data: Partial<User> = {
    roleId: 2, // ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼
    departmentId: 1,
    positionId: 1,
    statusFlag: true
  }

  withEmployeeCode(code: string): this {
    this.data.employeeCode = code
    return this
  }

  withName(firstName: string, lastName: string): this {
    this.data.firstName = firstName
    this.data.lastName = lastName
    return this
  }

  withEmail(email: string): this {
    this.data.email = email
    return this
  }

  withRole(roleId: number): this {
    this.data.roleId = roleId
    return this
  }

  asAdmin(): this {
    this.data.roleId = 1
    return this
  }

  asManager(): this {
    this.data.roleId = 3
    return this
  }

  withRandomData(): this {
    this.data.employeeCode = faker.string.numeric(6)
    this.data.firstName = faker.person.firstName()
    this.data.lastName = faker.person.lastName()
    this.data.email = faker.internet.email()
    return this
  }

  async build(): Promise<User> {
    const userData = {
      employeeCode: this.data.employeeCode || faker.string.numeric(6),
      firstName: this.data.firstName || faker.person.firstName(),
      lastName: this.data.lastName || faker.person.lastName(),
      email: this.data.email || faker.internet.email(),
      roleId: this.data.roleId!,
      departmentId: this.data.departmentId!,
      positionId: this.data.positionId!,
      statusFlag: this.data.statusFlag!
    }

    return await apiClient.post<User>('/api/users', userData)
  }
}
```

#### 1.2 Visual Regression Testing

```typescript
// tests/e2e/visual/components/skill-card.visual.spec.ts
import { test, expect } from '@playwright/test'
import { injectAxe, checkA11y } from 'axe-playwright'

test.describe('SkillCard Visual Regression', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/skills')
  })

  test('ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰: é€šå¸¸è¡¨ç¤º', async ({ page }) => {
    const skillCard = page.locator('[data-testid="skill-card"]').first()
    
    await expect(skillCard).toHaveScreenshot('skill-card-normal.png', {
      maxDiffPixels: 100,
      animations: 'disabled'
    })
  })

  test('ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰: ãƒ›ãƒãƒ¼çŠ¶æ…‹', async ({ page }) => {
    const skillCard = page.locator('[data-testid="skill-card"]').first()
    await skillCard.hover()
    
    await expect(skillCard).toHaveScreenshot('skill-card-hover.png', {
      maxDiffPixels: 100
    })
  })

  test('ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æ¤œè¨¼', async ({ page }) => {
    await injectAxe(page)
    await checkA11y(page, '[data-testid="skill-card"]', {
      detailedReport: true,
      detailedReportOptions: {
        html: true
      }
    })
  })

  test('ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ', async ({ page }) => {
    // ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤º
    await page.setViewportSize({ width: 375, height: 667 })
    const skillCardMobile = page.locator('[data-testid="skill-card"]').first()
    await expect(skillCardMobile).toHaveScreenshot('skill-card-mobile.png')

    // ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆè¡¨ç¤º
    await page.setViewportSize({ width: 768, height: 1024 })
    const skillCardTablet = page.locator('[data-testid="skill-card"]').first()
    await expect(skillCardTablet).toHaveScreenshot('skill-card-tablet.png')

    // ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—è¡¨ç¤º
    await page.setViewportSize({ width: 1920, height: 1080 })
    const skillCardDesktop = page.locator('[data-testid="skill-card"]').first()
    await expect(skillCardDesktop).toHaveScreenshot('skill-card-desktop.png')
  })
})
```

```typescript
// tests/e2e/visual/pages/skill-management.visual.spec.ts
import { test, expect } from '@playwright/test'
import { injectAxe, checkA11y } from 'axe-playwright'

test.describe('Skill Management Page Visual Regression', () => {
  test.beforeEach(async ({ page }) => {
    // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
    await page.goto('/skills')
  })

  test('ã‚¹ã‚­ãƒ«ç®¡ç†ç”»é¢: ãƒ•ãƒ«ãƒšãƒ¼ã‚¸ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ', async ({ page }) => {
    await expect(page).toHaveScreenshot('skill-management-page.png', {
      fullPage: true,
      animations: 'disabled',
      maxDiffPixelRatio: 0.05
    })
  })

  test('ã‚¹ã‚­ãƒ«ç®¡ç†ç”»é¢: ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰', async ({ page }) => {
    // ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
    await page.click('[data-testid="theme-toggle"]')
    await page.waitForTimeout(500)
    
    await expect(page).toHaveScreenshot('skill-management-page-dark.png', {
      fullPage: true
    })
  })

  test('ã‚¹ã‚­ãƒ«ç®¡ç†ç”»é¢: WCAGæº–æ‹ ãƒã‚§ãƒƒã‚¯', async ({ page }) => {
    await injectAxe(page)
    await checkA11y(page, null, {
      rules: {
        'color-contrast': { enabled: true },
        'heading-order': { enabled: true },
        'label': { enabled: true }
      }
    })
  })
})
```

#### 1.3 Versioned Test Data

```typescript
// tests/data/versions/v1.0.0/manifest.json
{
  "version": "1.0.0",
  "description": "åˆæœŸãƒªãƒªãƒ¼ã‚¹ç”¨ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿",
  "createdAt": "2025-11-06T00:00:00Z",
  "schemas": {
    "users": "./users.json",
    "skills": "./skills.json",
    "categories": "./categories.json"
  },
  "dependencies": [],
  "migrations": []
}
```

```typescript
// tests/data/manager.ts
import { readFile } from 'fs/promises'
import { join } from 'path'

export interface DataVersion {
  version: string
  description: string
  schemas: Record<string, string>
}

export class VersionedDataManager {
  private dataDir = join(__dirname, 'versions')

  async loadVersion(version: string): Promise<Record<string, any>> {
    const manifestPath = join(this.dataDir, `v${version}`, 'manifest.json')
    const manifest: DataVersion = JSON.parse(
      await readFile(manifestPath, 'utf-8')
    )

    const data: Record<string, any> = {}
    for (const [key, schemaPath] of Object.entries(manifest.schemas)) {
      const fullPath = join(this.dataDir, `v${version}`, schemaPath.replace('./', ''))
      data[key] = JSON.parse(await readFile(fullPath, 'utf-8'))
    }

    return data
  }

  async getLatestVersion(): Promise<string> {
    // å®Ÿè£…: æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—
    return '1.0.0'
  }

  async listVersions(): Promise<string[]> {
    // å®Ÿè£…: åˆ©ç”¨å¯èƒ½ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸€è¦§ã‚’å–å¾—
    return ['1.0.0']
  }

  async applyMigrations(fromVersion: string, toVersion: string): Promise<void> {
    // å®Ÿè£…: ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  }
}
```

#### 1.4 çµ±åˆãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª

```typescript
// tests/e2e/scenarios/skill/crud.spec.ts
import { test, expect } from '@playwright/test'
import { SkillManagementPage } from '../../page-objects/SkillManagementPage'
import { SkillBuilder } from '../../builders/SkillBuilder'
import { VersionedDataManager } from '../../data/manager'
import { BatchManager } from '../../utils/batch'

test.describe('ã‚¹ã‚­ãƒ«ç®¡ç†CRUD', () => {
  let skillPage: SkillManagementPage
  let dataManager: VersionedDataManager

  test.beforeAll(async () => {
    // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ãƒ‰
    dataManager = new VersionedDataManager()
    const testData = await dataManager.loadVersion('1.0.0')
    
    // ãƒãƒƒãƒã§ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
    await BatchManager.setupTestData('skill-crud', testData)
  })

  test.beforeEach(async ({ page }) => {
    skillPage = new SkillManagementPage(page)
    await skillPage.navigateTo('/skills')
  })

  test.afterAll(async () => {
    await BatchManager.cleanupTestData('skill-crud')
  })

  test('Phase1-001: Test Data Builderã‚’ä½¿ç”¨ã—ãŸã‚¹ã‚­ãƒ«ç™»éŒ²', async () => {
    // Data Builderã§ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä½œæˆ
    const skill = await new SkillBuilder()
      .withName('Next.js 14')
      .withLevel('â—')
      .withExperience(3)
      .buildData()

    await skillPage.addSkill(skill)
    await skillPage.verifySkillExists('Next.js 14')
    
    // Visual Regression
    await expect(skillPage.page).toHaveScreenshot('skill-added.png')
  })

  test('Phase1-002: è¤‡æ•°ã‚¹ã‚­ãƒ«ã®ä¸€æ‹¬ç™»éŒ²', async () => {
    const skills = await new SkillBuilder().buildMany(5)
    
    for (const skill of skills) {
      await skillPage.addSkill(skill)
    }
    
    await skillPage.verifySkillCount(5)
  })
})
```

### ğŸ“Š Phase 1 æˆæœç‰©

| æˆæœç‰© | èª¬æ˜ | å®Œäº†åŸºæº– |
|--------|------|----------|
| Test Data Builders | å…¨ä¸»è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å¯¾å¿œ | 5ç¨®é¡ä»¥ä¸Š |
| Visual Tests | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ»ãƒšãƒ¼ã‚¸ | 20ãƒ•ã‚¡ã‚¤ãƒ«ä»¥ä¸Š |
| Versioned Data | v1.0.0ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ | å®Œå…¨å‹•ä½œ |
| Integration Tests | ä¸»è¦ã‚·ãƒŠãƒªã‚ªå®Ÿè£… | 10ã‚·ãƒŠãƒªã‚ªä»¥ä¸Š |

---

## âš¡ Phase 2: AIé§†å‹•å¼·åŒ–ï¼ˆWeek 3-4ï¼‰

### å®Ÿè£…å†…å®¹

#### 1. AI-Powered Test Maintenance
#### 2. Chaos Engineering Tests

### ğŸ“¦ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# Phase 2 è¿½åŠ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
npm install -D @anthropic-ai/sdk
npm install -D openai
npm install -D chaos-mesh-client
```

### ğŸ“ å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

#### 2.1 AI Test Maintainer

```typescript
// tests/ai-maintenance/AITestMaintainer.ts
import Anthropic from '@anthropic-ai/sdk'
import { TestResult } from '@playwright/test'
import { readFile, writeFile } from 'fs/promises'

export class AITestMaintainer {
  private client: Anthropic

  constructor() {
    this.client = new Anthropic({
      apiKey: process.env.ANTHROPIC_API_KEY
    })
  }

  async analyzeFailures(testResults: TestResult[]): Promise<AnalysisResult> {
    const failures = testResults.filter(r => r.status === 'failed')
    
    if (failures.length === 0) {
      return { rootCauses: [], suggestedFixes: [], affectedTests: [] }
    }

    const prompt = this.buildAnalysisPrompt(failures)
    
    const message = await this.client.messages.create({
      model: 'claude-3-5-sonnet-20241022',
      max_tokens: 4096,
      messages: [{
        role: 'user',
        content: prompt
      }]
    })

    return this.parseAnalysisResponse(message.content)
  }

  async autoRefactor(testFile: string): Promise<RefactorSuggestion[]> {
    const code = await readFile(testFile, 'utf-8')
    
    const prompt = `
ä»¥ä¸‹ã®Playwrightãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ã¦ãã ã•ã„ï¼š

\`\`\`typescript
${code}
\`\`\`

æ”¹å–„ã™ã¹ãç‚¹ï¼š
1. é‡è¤‡ã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤
2. å¯èª­æ€§ã®å‘ä¸Š
3. ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã®å‘ä¸Š
4. ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®é©ç”¨

ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ¡ˆã‚’JSONå½¢å¼ã§ææ¡ˆã—ã¦ãã ã•ã„ã€‚
`

    const message = await this.client.messages.create({
      model: 'claude-3-5-sonnet-20241022',
      max_tokens: 8192,
      messages: [{
        role: 'user',
        content: prompt
      }]
    })

    return this.parseRefactorResponse(message.content)
  }

  async healTest(testFile: string, error: string): Promise<string> {
    const code = await readFile(testFile, 'utf-8')
    
    const prompt = `
ä»¥ä¸‹ã®Playwrightãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¦ã„ã¾ã™ï¼š

ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ï¼š
\`\`\`typescript
${code}
\`\`\`

ã‚¨ãƒ©ãƒ¼ï¼š
\`\`\`
${error}
\`\`\`

ãƒ†ã‚¹ãƒˆã‚’ä¿®æ­£ã—ã¦ã€å‹•ä½œã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è¿”ã—ã¦ãã ã•ã„ã€‚
`

    const message = await this.client.messages.create({
      model: 'claude-3-5-sonnet-20241022',
      max_tokens: 8192,
      messages: [{
        role: 'user',
        content: prompt
      }]
    })

    const fixedCode = this.extractCodeFromResponse(message.content)
    await writeFile(testFile, fixedCode, 'utf-8')
    
    return fixedCode
  }

  private buildAnalysisPrompt(failures: TestResult[]): string {
    const failureDetails = failures.map(f => ({
      test: f.title,
      error: f.error?.message,
      stack: f.error?.stack
    }))

    return `
Playwrightãƒ†ã‚¹ãƒˆã®å¤±æ•—ã‚’åˆ†æã—ã¦ãã ã•ã„ï¼š

å¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆï¼š
${JSON.stringify(failureDetails, null, 2)}

ä»¥ä¸‹ã®å½¢å¼ã§åˆ†æçµæœã‚’è¿”ã—ã¦ãã ã•ã„ï¼š
{
  "rootCauses": ["æ ¹æœ¬åŸå› 1", "æ ¹æœ¬åŸå› 2"],
  "suggestedFixes": ["ä¿®æ­£æ¡ˆ1", "ä¿®æ­£æ¡ˆ2"],
  "affectedTests": ["å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ†ã‚¹ãƒˆ1", "å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ†ã‚¹ãƒˆ2"]
}
`
  }

  private parseAnalysisResponse(content: any): AnalysisResult {
    // å®Ÿè£…: Claude responseã‚’ãƒ‘ãƒ¼ã‚¹
    return {
      rootCauses: [],
      suggestedFixes: [],
      affectedTests: []
    }
  }

  private parseRefactorResponse(content: any): RefactorSuggestion[] {
    // å®Ÿè£…: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ææ¡ˆã‚’ãƒ‘ãƒ¼ã‚¹
    return []
  }

  private extractCodeFromResponse(content: any): string {
    // å®Ÿè£…: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’æŠ½å‡º
    return ''
  }
}

interface AnalysisResult {
  rootCauses: string[]
  suggestedFixes: string[]
  affectedTests: string[]
}

interface RefactorSuggestion {
  type: 'remove-duplication' | 'improve-readability' | 'apply-best-practice'
  description: string
  before: string
  after: string
  impact: 'low' | 'medium' | 'high'
}
```

#### 2.2 Chaos Engineering Tests

```typescript
// tests/e2e/chaos/network-latency.spec.ts
import { test, expect } from '@playwright/test'
import { SkillManagementPage } from '../page-objects/SkillManagementPage'

test.describe('Chaos: Network Latency', () => {
  let skillPage: SkillManagementPage

  test.beforeEach(async ({ page }) => {
    skillPage = new SkillManagementPage(page)
  })

  test('é«˜ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ç’°å¢ƒã§ã®ã‚¹ã‚­ãƒ«ç™»éŒ²', async ({ page }) => {
    // 5ç§’ã®é…å»¶ã‚’æ³¨å…¥
    await page.route('**/api/skills', async route => {
      await new Promise(resolve => setTimeout(resolve, 5000))
      await route.continue()
    })

    await skillPage.navigateTo('/skills')
    await skillPage.addSkill({ name: 'Test Skill', level: 'â—‹' })

    // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºã®ç¢ºèª
    await expect(page.locator('[data-testid="loading-spinner"]')).toBeVisible()
    
    // ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè­¦å‘Šã®ç¢ºèª
    await expect(page.locator('[data-testid="timeout-warning"]')).toBeVisible({
      timeout: 6000
    })
  })

  test('é–“æ¬ çš„ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼', async ({ page }) => {
    let requestCount = 0

    await page.route('**/api/skills', route => {
      requestCount++
      // 50%ã®ç¢ºç‡ã§ã‚¨ãƒ©ãƒ¼
      if (Math.random() < 0.5) {
        route.abort('failed')
      } else {
        route.continue()
      }
    })

    await skillPage.navigateTo('/skills')
    await skillPage.addSkill({ name: 'Test Skill', level: 'â—‹' })

    // ãƒªãƒˆãƒ©ã‚¤ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
    const retryButton = page.locator('[data-testid="retry-button"]')
    if (await retryButton.isVisible()) {
      await retryButton.click()
    }

    // æœ€çµ‚çš„ã«æˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèª
    await expect(page.locator('[data-testid="success-message"]')).toBeVisible({
      timeout: 15000
    })
  })
})
```

```typescript
// tests/e2e/chaos/api-failure.spec.ts
import { test, expect } from '@playwright/test'
import { SkillManagementPage } from '../page-objects/SkillManagementPage'

test.describe('Chaos: API Failures', () => {
  test('APIãƒ¬ã‚¹ãƒãƒ³ã‚¹500ã‚¨ãƒ©ãƒ¼', async ({ page }) => {
    await page.route('**/api/skills', route => {
      route.fulfill({
        status: 500,
        contentType: 'application/json',
        body: JSON.stringify({ error: 'Internal Server Error' })
      })
    })

    const skillPage = new SkillManagementPage(page)
    await skillPage.navigateTo('/skills')
    await skillPage.addSkill({ name: 'Test', level: 'â—‹' })

    // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤ºç¢ºèª
    await expect(page.locator('[data-testid="error-message"]')).toContainText(
      'ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ'
    )
  })

  test('APIèªè¨¼ã‚¨ãƒ©ãƒ¼', async ({ page }) => {
    await page.route('**/api/skills', route => {
      route.fulfill({
        status: 401,
        contentType: 'application/json',
        body: JSON.stringify({ error: 'Unauthorized' })
      })
    })

    const skillPage = new SkillManagementPage(page)
    await skillPage.navigateTo('/skills')

    // ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
    await expect(page).toHaveURL(/\/login/)
  })
})
```

### ğŸ“Š Phase 2 æˆæœç‰©

| æˆæœç‰© | èª¬æ˜ | å®Œäº†åŸºæº– |
|--------|------|----------|
| AI Maintainer | è‡ªå‹•åˆ†æãƒ»ä¿®å¾©æ©Ÿèƒ½ | å‹•ä½œç¢ºèªå®Œäº† |
| Chaos Tests | éšœå®³ã‚·ãƒŠãƒªã‚ªå®Ÿè£… | 10ã‚·ãƒŠãƒªã‚ªä»¥ä¸Š |
| Auto-Healing | è‡ªå‹•ä¿®å¾©çµ±åˆ | CI/CDçµ±åˆå®Œäº† |

---

## ğŸŒ Phase 3: å¤§è¦æ¨¡åŒ–å¯¾å¿œï¼ˆWeek 5-6ï¼‰

### å®Ÿè£…å†…å®¹

#### 1. BDD/Cucumber Integration
#### 2. Distributed Testing
#### 3. Multi-Tenancy Testing

### ğŸ“¦ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# Phase 3 è¿½åŠ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
npm install -D @cucumber/cucumber
npm install -D @cucumber/playwright
npm install -D playwright-cluster
```

### ğŸ“ å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

#### 3.1 BDD Features

```gherkin
# tests/features/skill-management.feature
Feature: ã‚¹ã‚­ãƒ«ç®¡ç†æ©Ÿèƒ½
  ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ã‚¹ã‚­ãƒ«ã‚’ç®¡ç†ã—ãŸã„

  Background:
    Given ãƒãƒƒãƒãƒ—ãƒ­ã‚°ãƒ©ãƒ  "setup-test-data" ã‚’å®Ÿè¡Œæ¸ˆã¿
    And ãƒ¦ãƒ¼ã‚¶ãƒ¼ "user001" ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿
    And ã‚¹ã‚­ãƒ«ç®¡ç†ç”»é¢ã‚’è¡¨ç¤ºã—ã¦ã„ã‚‹

  @smoke
  Scenario: æ–°è¦ã‚¹ã‚­ãƒ«ç™»éŒ²
    When "ã‚¹ã‚­ãƒ«è¿½åŠ " ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    And ã‚¹ã‚­ãƒ«åã« "Next.js 14" ã‚’å…¥åŠ›
    And ã‚«ãƒ†ã‚´ãƒªã« "ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯" ã‚’é¸æŠ
    And ãƒ¬ãƒ™ãƒ«ã« "â—" ã‚’é¸æŠ
    And çµŒé¨“å¹´æ•°ã« "3" ã‚’å…¥åŠ›
    And "ä¿å­˜" ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    Then ã‚¹ã‚­ãƒ«ä¸€è¦§ã« "Next.js 14" ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    And é€šçŸ¥ã« "ã‚¹ã‚­ãƒ«ã‚’ç™»éŒ²ã—ã¾ã—ãŸ" ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    And Visual Regression "skill-added" ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹

  @batch
  Scenario: ã‚¹ã‚­ãƒ«ä¸€æ‹¬ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
    Given ä»¥ä¸‹ã®ã‚¹ã‚­ãƒ«ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹:
      | name       | category        | level | experience |
      | Next.js    | ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯    | â—     | 3          |
      | React      | ãƒ©ã‚¤ãƒ–ãƒ©ãƒª       | â—     | 4          |
      | TypeScript | è¨€èª            | â—     | 5          |
    When ãƒãƒƒãƒ "skill-export" ã‚’å®Ÿè¡Œ
    Then "skills_export.csv" ãŒç”Ÿæˆã•ã‚Œã‚‹
    And CSVã«3ä»¶ã®ã‚¹ã‚­ãƒ«ãŒå«ã¾ã‚Œã‚‹
    And CSVå†…å®¹ãŒæœŸå¾…å€¤ã¨ä¸€è‡´ã™ã‚‹

  @validation
  Scenario Outline: ã‚¹ã‚­ãƒ«ç™»éŒ²ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    When "ã‚¹ã‚­ãƒ«è¿½åŠ " ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    And ã‚¹ã‚­ãƒ«åã« "<skill_name>" ã‚’å…¥åŠ›
    And "ä¿å­˜" ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    Then ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ "<error_message>" ãŒè¡¨ç¤ºã•ã‚Œã‚‹

    Examples:
      | skill_name | error_message              |
      |            | ã‚¹ã‚­ãƒ«åã¯å¿…é ˆã§ã™           |
      | A          | ã‚¹ã‚­ãƒ«åã¯2æ–‡å­—ä»¥ä¸Šã§ã™      |
      | 123456789012345678901234567890123 | ã‚¹ã‚­ãƒ«åã¯30æ–‡å­—ä»¥å†…ã§ã™ |

  @chaos
  Scenario: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒªãƒˆãƒ©ã‚¤
    Given ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é…å»¶ "5000ms" ã‚’æ³¨å…¥
    When "ã‚¹ã‚­ãƒ«è¿½åŠ " ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    And ã‚¹ã‚­ãƒ«åã« "Test Skill" ã‚’å…¥åŠ›
    And "ä¿å­˜" ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    Then ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºãŒè¡¨ç¤ºã•ã‚Œã‚‹
    And "ãƒªãƒˆãƒ©ã‚¤" ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    When "ãƒªãƒˆãƒ©ã‚¤" ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    Then ã‚¹ã‚­ãƒ«ãŒæ­£å¸¸ã«ç™»éŒ²ã•ã‚Œã‚‹
```

```typescript
// tests/features/step-definitions/skill-steps.ts
import { Given, When, Then, Before, After } from '@cucumber/cucumber'
import { expect } from '@playwright/test'
import { SkillManagementPage } from '../../e2e/page-objects/SkillManagementPage'
import { BatchManager } from '../../e2e/utils/batch'
import { SkillBuilder } from '../../e2e/builders/SkillBuilder'

let skillPage: SkillManagementPage

Before(async function () {
  skillPage = new SkillManagementPage(this.page)
})

Given('ãƒãƒƒãƒãƒ—ãƒ­ã‚°ãƒ©ãƒ  {string} ã‚’å®Ÿè¡Œæ¸ˆã¿', async function (batchName: string) {
  await BatchManager.runBatch(batchName)
})

Given('ãƒ¦ãƒ¼ã‚¶ãƒ¼ {string} ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿', async function (userId: string) {
  await this.page.goto('/login')
  await this.page.fill('[name="userId"]', userId)
  await this.page.fill('[name="password"]', 'password')
  await this.page.click('[type="submit"]')
  await this.page.waitForURL('/dashboard')
})

Given('ã‚¹ã‚­ãƒ«ç®¡ç†ç”»é¢ã‚’è¡¨ç¤ºã—ã¦ã„ã‚‹', async function () {
  await skillPage.navigateTo('/skills')
})

When('{string} ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯', async function (buttonText: string) {
  await this.page.click(`button:has-text("${buttonText}")`)
})

When('ã‚¹ã‚­ãƒ«åã« {string} ã‚’å…¥åŠ›', async function (skillName: string) {
  await this.page.fill('[data-testid="skill-name-input"]', skillName)
})

When('ã‚«ãƒ†ã‚´ãƒªã« {string} ã‚’é¸æŠ', async function (category: string) {
  await this.page.selectOption('[data-testid="category-select"]', category)
})

When('ãƒ¬ãƒ™ãƒ«ã« {string} ã‚’é¸æŠ', async function (level: string) {
  await this.page.click(`[data-testid="level-${level}"]`)
})

When('çµŒé¨“å¹´æ•°ã« {string} ã‚’å…¥åŠ›', async function (years: string) {
  await this.page.fill('[data-testid="experience-input"]', years)
})

Then('ã‚¹ã‚­ãƒ«ä¸€è¦§ã« {string} ãŒè¡¨ç¤ºã•ã‚Œã‚‹', async function (skillName: string) {
  await skillPage.verifySkillExists(skillName)
})

Then('é€šçŸ¥ã« {string} ãŒè¡¨ç¤ºã•ã‚Œã‚‹', async function (message: string) {
  await expect(this.page.locator('[data-testid="toast-message"]')).toContainText(message)
})

Then('Visual Regression {string} ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹', async function (name: string) {
  await expect(this.page).toHaveScreenshot(`${name}.png`)
})

Given('ä»¥ä¸‹ã®ã‚¹ã‚­ãƒ«ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹:', async function (dataTable) {
  for (const row of dataTable.hashes()) {
    await new SkillBuilder()
      .withName(row.name)
      .withLevel(row.level)
      .withExperience(parseInt(row.experience))
      .build()
  }
})

When('ãƒãƒƒãƒ {string} ã‚’å®Ÿè¡Œ', async function (batchName: string) {
  this.batchResult = await BatchManager.runBatch(batchName)
})

Then('{string} ãŒç”Ÿæˆã•ã‚Œã‚‹', async function (fileName: string) {
  expect(this.batchResult.files).toContain(fileName)
})

Then('CSVã«{int}ä»¶ã®ã‚¹ã‚­ãƒ«ãŒå«ã¾ã‚Œã‚‹', async function (count: number) {
  expect(this.batchResult.recordCount).toBe(count)
})
```

#### 3.2 Test Orchestrator

```typescript
// tests/orchestrator/TestOrchestrator.ts
import { Worker } from 'worker_threads'
import { TestScenario, TestResult } from './types'

export class TestOrchestrator {
  private workers: TestWorker[] = []
  private maxWorkers: number

  constructor(maxWorkers: number = 4) {
    this.maxWorkers = maxWorkers
    this.initializeWorkers()
  }

  private initializeWorkers() {
    for (let i = 0; i < this.maxWorkers; i++) {
      this.workers.push(new TestWorker(i))
    }
  }

  async distributeTests(scenarios: TestScenario[]): Promise<TestResult[]> {
    const chunks = this.chunkScenarios(scenarios, this.maxWorkers)
    
    const workerPromises = chunks.map((chunk, index) => 
      this.workers[index].runTests(chunk)
    )

    const results = await Promise.all(workerPromises)
    return this.aggregateResults(results)
  }

  async executeBatchDependencies(scenario: TestScenario): Promise<void> {
    const dependencies = scenario.batchDependencies || []
    const resolved = this.resolveDependencies(dependencies)

    for (const batch of resolved) {
      await this.executeBatch(batch)
    }
  }

  private chunkScenarios(scenarios: TestScenario[], chunks: number): TestScenario[][] {
    const result: TestScenario[][] = Array.from({ length: chunks }, () => [])
    
    scenarios.forEach((scenario, index) => {
      result[index % chunks].push(scenario)
    })

    return result
  }

  private resolveDependencies(dependencies: string[]): string[] {
    // ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ã¦ã‚½ãƒ¼ãƒˆ
    // ãƒˆãƒãƒ­ã‚¸ã‚«ãƒ«ã‚½ãƒ¼ãƒˆå®Ÿè£…
    return dependencies
  }

  private async executeBatch(batchName: string): Promise<void> {
    // ãƒãƒƒãƒå®Ÿè¡Œ
  }

  private aggregateResults(results: TestResult[][]): TestResult[] {
    return results.flat()
  }
}

class TestWorker {
  constructor(private id: number) {}

  async runTests(scenarios: TestScenario[]): Promise<TestResult[]> {
    // Worker threadã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
    return []
  }
}
```

### ğŸ“Š Phase 3 æˆæœç‰©

| æˆæœç‰© | èª¬æ˜ | å®Œäº†åŸºæº– |
|--------|------|----------|
| BDD Features | Gherkinå½¢å¼ã‚·ãƒŠãƒªã‚ª | 20ã‚·ãƒŠãƒªã‚ªä»¥ä¸Š |
| Test Orchestrator | ä¸¦åˆ—å®Ÿè¡ŒåŸºç›¤ | 4ãƒ¯ãƒ¼ã‚«ãƒ¼å‹•ä½œ |
| Multi-Tenancy | ãƒ†ãƒŠãƒ³ãƒˆåˆ†é›¢ | å®Œå…¨åˆ†é›¢ç¢ºèª |

---

## ğŸ“Š å®Ÿè£…é€²æ—ç®¡ç†

### ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

| ãƒ•ã‚§ãƒ¼ã‚º | æœŸé–“ | å®Œäº†æ—¥ | çŠ¶æ…‹ |
|---------|------|--------|------|
| Phase 1 | Week 1-2 | 2025-11-20 | ğŸŸ¡ é€²è¡Œä¸­ |
| Phase 2 | Week 3-4 | 2025-12-04 | âšª æœªç€æ‰‹ |
| Phase 3 | Week 5-6 | 2025-12-18 | âšª æœªç€æ‰‹ |

### KPI

| æŒ‡æ¨™ | ç¾çŠ¶ | Phase 1 | Phase 2 | Phase 3 |
|------|------|---------|---------|---------|
| ãƒ†ã‚¹ãƒˆä½œæˆå·¥æ•° | 100% | 50% | 25% | 12.5% |
| ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ | 40% | 60% | 80% | 90% |
| ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ | 60åˆ† | 45åˆ† | 30åˆ† | 20åˆ† |
| ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å·¥æ•° | 100% | 60% | 30% | 15% |
| UIå›å¸°æ¤œå‡ºç‡ | 30% | 80% | 90% | 95% |

---

## ğŸ”§ package.json ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ›´æ–°

```json
{
  "scripts": {
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "test:e2e:headed": "playwright test --headed",
    "test:e2e:debug": "playwright test --debug",
    "test:e2e:report": "playwright show-report",
    
    "test:visual": "playwright test tests/e2e/visual",
    "test:visual:update": "playwright test tests/e2e/visual --update-snapshots",
    
    "test:chaos": "playwright test tests/e2e/chaos",
    
    "test:agents:plan": "playwright agent planner",
    "test:agents:generate": "playwright agent generator",
    "test:agents:heal": "playwright agent healer --auto-fix",
    "test:agents:heal:suggest": "playwright agent healer --suggest-only",
    
    "test:ai:analyze": "tsx tests/ai-maintenance/analyze-failures.ts",
    "test:ai:refactor": "tsx tests/ai-maintenance/refactor-tests.ts",
    "test:ai:heal": "tsx tests/ai-maintenance/heal-test.ts",
    
    "test:bdd": "cucumber-js",
    "test:bdd:parallel": "cucumber-js --parallel 4",
    
    "test:data:load": "tsx tests/data/load-version.ts",
    "test:data:migrate": "tsx tests/data/migrate-version.ts",
    
    "test:batch:setup": "tsx tests/batch/scripts/setup-test-data.ts",
    "test:batch:cleanup": "tsx tests/batch/scripts/cleanup-test-data.ts",
    
    "test:orchestrate": "tsx tests/orchestrator/run.ts",
    
    "test:all": "npm run test:e2e && npm run test:visual && npm run test:chaos && npm run test:bdd"
  }
}
```

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [E2Eãƒ†ã‚¹ãƒˆå®Ÿè£…ã‚¬ã‚¤ãƒ‰](./05_E2Eãƒ†ã‚¹ãƒˆå®Ÿè£…ã‚¬ã‚¤ãƒ‰.md)
- [ãƒ†ã‚¹ãƒˆè¨ˆç”»æ›¸](./01_ãƒ†ã‚¹ãƒˆè¨ˆç”»æ›¸.md)
- [ãƒ†ã‚¹ãƒˆè¨­è¨ˆæ›¸](./02_ãƒ†ã‚¹ãƒˆè¨­è¨ˆæ›¸.md)

---

## ğŸ“ å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ | æ‹…å½“è€… |
|------|-----------|---------|--------|
| 2025-11-06 | 1.0 | åˆç‰ˆä½œæˆ | AIæ¨é€²ãƒãƒ¼ãƒ  |
