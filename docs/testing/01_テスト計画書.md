# テスト計画書: 年間スキル報告書WEB化PJT

---

## 1. 文書情報

| 項目 | 内容 |
|------|------|
| 文書名 | テスト計画書 |
| プロジェクト名 | 年間スキル報告書WEB化プロジェクト |
| システム名 | スキル報告書管理システム（SRMS） |
| プロジェクトID | SAS-DX-AI-2025-001 |
| 作成者 | 中島（PM）、黒澤（業務L） |
| 作成日 | 2025年5月29日 |
| 最終更新日 | 2025年5月29日 |
| 版数 | 1.0 |

---

## 2. テスト計画概要

### 2.1 テスト目的

本テスト計画書は、年間スキル報告書WEB化プロジェクトにおけるテスト活動の全体方針、テスト戦略、テスト手法、テスト体制、テストスケジュールを定義し、品質の高いシステムの構築を確実にすることを目的とする。

### 2.2 テスト方針

以下の4段階のテストを実施する：

- **ユニットテスト**: 各コンポーネントの単体テスト
- **統合テスト**: コンポーネント間の連携テスト
- **E2Eテスト**: ユーザーシナリオに基づいたテスト
- **パフォーマンステスト**: 応答時間の検証

### 2.3 テスト対象システム

- **システム名**: スキル報告書管理システム（SRMS）
- **対象範囲**: Webアプリケーション（フロントエンド + バックエンド）
- **技術スタック**: Next.js 14、TypeScript、PostgreSQL、Vercel

---

## 3. テスト戦略

### 3.1 テストレベル定義

| テストレベル | 目的 | 実施者 | 実施環境 | 実施時期 |
|-------------|------|-------|---------|---------|
| ユニットテスト | 個別コンポーネントの機能検証 | 開発者 | ローカル環境 | 開発と並行 |
| 統合テスト | コンポーネント間の連携検証 | 開発者・テスター | テスト環境 | 機能実装完了後 |
| システムテスト | システム全体の機能・性能検証 | テストチーム | テスト環境 | 統合テスト完了後 |
| 受入テスト | ユーザー要件の充足確認 | ユーザー・テストチーム | ステージング環境 | システムテスト完了後 |

### 3.2 テスト観点

#### 3.2.1 機能テスト観点
- **正常系**: 仕様通りの動作確認
- **異常系**: エラーハンドリング確認
- **境界値**: 入力値の境界での動作確認
- **権限**: ロールベースアクセス制御の確認

#### 3.2.2 非機能テスト観点
- **性能**: レスポンス時間、スループット
- **可用性**: システム稼働率、障害復旧
- **セキュリティ**: 認証・認可、データ保護
- **ユーザビリティ**: 操作性、アクセシビリティ

### 3.3 テスト手法

| テスト手法 | 適用範囲 | 実施方法 |
|-----------|---------|---------|
| 自動テスト | ユニット・統合・E2E | Vitest、Testing Library、Playwright |
| 手動テスト | システム・受入 | テストケース実行 |
| 探索的テスト | システム・受入 | アドホックテスト |
| 負荷テスト | 性能 | k6 |
| セキュリティテスト | セキュリティ | OWASP ZAP、手動検査 |

---

## 4. テスト体制

### 4.1 テスト組織

| 役割 | 担当者 | 責任・業務内容 |
|------|-------|---------------|
| **テストマネージャー** | 中島（PM） | テスト計画策定、進捗管理、品質判定 |
| **テストリーダー** | 中島（PM） | テスト設計、テスト実行管理、課題管理 |
| **テスト設計者** | 黒澤（業務L） | テストケース設計、テストデータ作成 |
| **テスト実行者** | 開発チーム全員 | テスト実行、バグ報告、修正確認 |
| **自動化エンジニア** | 笹尾（PL） | テスト自動化、CI/CD構築 |

### 4.2 テスト環境責任者

| 環境 | 責任者 | 管理内容 |
|------|-------|---------|
| ローカル環境 | 各開発者 | 個人開発環境の構築・管理 |
| テスト環境 | 笹尾（PL） | 共有テスト環境の構築・管理 |
| ステージング環境 | 笹尾（PL） | 本番相当環境の構築・管理 |
| 本番環境 | 笹尾（PL） | 本番環境の監視・保守 |

---

## 5. テスト環境

### 5.1 テスト環境構成

#### 5.1.1 ローカル開発環境
- **OS**: Windows/macOS/Linux
- **ブラウザ**: Chrome、Edge、Firefox、Safari最新版
- **データベース**: PostgreSQL 15（Docker）
- **実行環境**: Node.js 18+、Docker Compose

#### 5.1.2 テスト環境
- **ホスティング**: Vercel（プレビュー環境）
- **データベース**: Supabase PostgreSQL
- **テストデータ**: 匿名化された本番相当データ
- **監視**: Vercel Analytics、Sentry

#### 5.1.3 ステージング環境
- **ホスティング**: Vercel
- **データベース**: Neon PostgreSQL
- **構成**: 本番環境と同等
- **データ**: 本番データの匿名化コピー

### 5.2 テストデータ管理

#### 5.2.1 テストデータ種別
- **マスタデータ**: 部署、役職、スキルカテゴリ、資格マスタ
- **ユーザーデータ**: 社員情報、権限設定
- **トランザクションデータ**: スキル評価、目標設定、作業実績
- **境界値データ**: 最大・最小値、特殊文字、NULL値

#### 5.2.2 テストデータ作成方針
- 個人情報は匿名化・仮名化
- 実業務に近いリアルなデータ
- 境界値・異常値を含む網羅的なデータ
- 自動生成スクリプトによる効率的な作成

---

## 6. テストスケジュール

### 6.1 全体スケジュール

| フェーズ | 期間 | テスト活動 | 成果物 |
|---------|------|-----------|-------|
| **要件定義・設計** | 2025/5/20～6/10 | テスト計画策定、テスト設計 | テスト計画書、テスト設計書 |
| **プロトタイプ開発** | 2025/6/11～6/30 | ユニットテスト、統合テスト | テスト実行結果、バグレポート |
| **機能拡張・改善** | 2025/7/1～7/15 | システムテスト、性能テスト | テスト実行結果、性能測定結果 |
| **パイロット導入・検証** | 2025/7/16～7/25 | 受入テスト、ユーザビリティテスト | 受入テスト結果、改善提案 |
| **最終調整・納品** | 2025/7/26～7/31 | リグレッションテスト、最終確認 | 品質保証書、テスト完了報告書 |

### 6.2 詳細スケジュール

#### 6.2.1 テスト準備フェーズ（5/20～6/10）
- **Week 1-2**: テスト計画策定、テスト環境設計
- **Week 3**: テストケース設計、テストデータ準備
- **Week 4**: テスト自動化環境構築、テストツール導入

#### 6.2.2 開発・テスト並行フェーズ（6/11～7/15）
- **Week 5-6**: ユニットテスト、統合テスト（プロトタイプ）
- **Week 7-8**: システムテスト、性能テスト（完成版）
- **Week 9**: セキュリティテスト、アクセシビリティテスト

#### 6.2.3 受入・最終確認フェーズ（7/16～7/31）
- **Week 10**: 受入テスト、ユーザビリティテスト
- **Week 11**: リグレッションテスト、最終品質確認

---

## 7. テスト項目・テストケース

### 7.1 機能テスト項目

#### 7.1.1 認証・認可機能（F01, F02）
| テストID | テスト項目 | 優先度 | テスト手法 |
|---------|-----------|-------|-----------|
| TC-AUTH-001 | 正常ログイン | 高 | 自動 |
| TC-AUTH-002 | 不正ログイン | 高 | 自動 |
| TC-AUTH-003 | アカウントロック | 中 | 手動 |
| TC-AUTH-004 | SSOログイン | 中 | 手動 |
| TC-RBAC-001 | ロール権限確認 | 高 | 自動 |
| TC-RBAC-002 | 権限外アクセス拒否 | 高 | 自動 |

#### 7.1.2 プロフィール管理機能（F03, F04）
| テストID | テスト項目 | 優先度 | テスト手法 |
|---------|-----------|-------|-----------|
| TC-PROF-001 | 基本情報参照 | 高 | 自動 |
| TC-PROF-002 | 基本情報編集 | 高 | 自動 |
| TC-PROF-003 | 履歴管理 | 中 | 手動 |
| TC-ORG-001 | 組織マスタ同期 | 中 | 手動 |

#### 7.1.3 スキル管理機能（F05, F06, F07, F08）
| テストID | テスト項目 | 優先度 | テスト手法 |
|---------|-----------|-------|-----------|
| TC-SKILL-001 | スキル情報登録 | 高 | 自動 |
| TC-SKILL-002 | スキル情報編集 | 高 | 自動 |
| TC-SKILL-003 | スキル検索 | 高 | 自動 |
| TC-SKILL-004 | スキルマップ生成 | 中 | 手動 |
| TC-CERT-001 | 資格情報登録 | 中 | 自動 |
| TC-CERT-002 | 資格期限アラート | 中 | 手動 |

#### 7.1.4 目標・キャリア管理機能（F09, F10）
| テストID | テスト項目 | 優先度 | テスト手法 |
|---------|-----------|-------|-----------|
| TC-GOAL-001 | 目標設定 | 中 | 自動 |
| TC-GOAL-002 | 進捗管理 | 中 | 自動 |
| TC-EVAL-001 | 自己評価入力 | 中 | 手動 |
| TC-EVAL-002 | 上長評価入力 | 中 | 手動 |

#### 7.1.5 作業実績管理機能（F11, F12）
| テストID | テスト項目 | 優先度 | テスト手法 |
|---------|-----------|-------|-----------|
| TC-WORK-001 | 案件実績登録 | 中 | 自動 |
| TC-WORK-002 | 一括実績登録 | 低 | 手動 |
| TC-WORK-003 | 実績データ集計 | 中 | 自動 |

#### 7.1.6 研修・教育管理機能（F13, F14）
| テストID | テスト項目 | 優先度 | テスト手法 |
|---------|-----------|-------|-----------|
| TC-TRAIN-001 | 研修記録登録 | 中 | 自動 |
| TC-PDU-001 | PDU管理 | 中 | 手動 |

#### 7.1.7 レポート・分析機能（F15）
| テストID | テスト項目 | 優先度 | テスト手法 |
|---------|-----------|-------|-----------|
| TC-RPT-001 | Excel帳票出力 | 低 | 手動 |
| TC-RPT-002 | PDF変換 | 低 | 手動 |
| TC-RPT-003 | レイアウト維持 | 低 | 手動 |

#### 7.1.8 システム管理機能（F16, F17, F18, F19, F20）
| テストID | テスト項目 | 優先度 | テスト手法 |
|---------|-----------|-------|-----------|
| TC-SYS-001 | バックアップ実行 | 高 | 手動 |
| TC-SYS-002 | リストア実行 | 高 | 手動 |
| TC-MON-001 | 死活監視 | 高 | 自動 |
| TC-MON-002 | 障害通知 | 高 | 手動 |
| TC-AUDIT-001 | 監査ログ記録 | 高 | 自動 |
| TC-MASTER-001 | マスタデータ管理 | 低 | 手動 |

### 7.2 非機能テスト項目

#### 7.2.1 性能テスト
| テストID | テスト項目 | 目標値 | 測定方法 |
|---------|-----------|-------|---------|
| TC-PERF-001 | ページロード時間 | 2秒以内（95%ile） | Lighthouse、k6 |
| TC-PERF-002 | API応答時間 | 500ms以内（95%ile） | k6、APM |
| TC-PERF-003 | 同時接続ユーザー | 100ユーザー | k6負荷テスト |
| TC-PERF-004 | データ処理量 | 10,000トランザクション/日 | 負荷テスト |

#### 7.2.2 セキュリティテスト
| テストID | テスト項目 | 検証内容 | 実施方法 |
|---------|-----------|---------|---------|
| TC-SEC-001 | OWASP Top 10対策 | 脆弱性検査 | OWASP ZAP |
| TC-SEC-002 | 認証・認可 | 不正アクセス防止 | 手動テスト |
| TC-SEC-003 | データ暗号化 | 保存・通信データ保護 | 設定確認 |
| TC-SEC-004 | SQLインジェクション | 入力値検証 | 自動・手動 |

#### 7.2.3 ユーザビリティテスト
| テストID | テスト項目 | 評価基準 | 実施方法 |
|---------|-----------|---------|---------|
| TC-UX-001 | 操作性 | タスク完了率90%以上 | ユーザーテスト |
| TC-UX-002 | アクセシビリティ | WCAG 2.1 AAレベル | axe-core |
| TC-UX-003 | レスポンシブ対応 | 主要デバイス対応 | 実機テスト |
| TC-UX-004 | ブラウザ互換性 | 主要ブラウザ対応 | クロスブラウザテスト |

#### 7.2.4 可用性テスト
| テストID | テスト項目 | 目標値 | 実施方法 |
|---------|-----------|-------|---------|
| TC-AVAIL-001 | サービス稼働率 | 99.9%以上 | 監視ツール |
| TC-AVAIL-002 | 障害復旧時間（RTO） | 2時間以内 | 障害シミュレーション |
| TC-AVAIL-003 | 目標復旧地点（RPO） | 15分以内 | バックアップテスト |

---

## 8. ユーザーテストシナリオ

### 8.1 主要ユーザーシナリオ

要件定義書「## 10.1 ユーザーテストシナリオ一覧」に基づき、以下のシナリオを実施する：

#### 8.1.1 認証・基本操作シナリオ
| シナリオID | シナリオ名 | 実施者 | 期待結果 |
|-----------|-----------|-------|---------|
| US-001 | ログイン認証正常 | 一般ユーザー | 正常ログイン後、ホーム画面表示 |
| US-002 | ログイン認証エラー | 一般ユーザー | エラーメッセージ表示、再入力促進 |
| US-003 | アカウントロック | 一般ユーザー | 連続失敗後ロック、管理者通知 |
| US-004 | SSOログイン | 一般ユーザー | 外部IdP経由で正常ログイン |

#### 8.1.2 スキル管理シナリオ
| シナリオID | シナリオ名 | 実施者 | 期待結果 |
|-----------|-----------|-------|---------|
| US-010 | スキル情報登録・編集 | 一般ユーザー | スキル評価の登録・更新・保存 |
| US-011 | スキルマスタ管理 | システム管理者 | スキル項目の追加・編集・削除 |
| US-012 | スキル検索 | 上司・管理者 | 条件指定でユーザー検索・一覧表示 |

#### 8.1.3 業務フローシナリオ
| シナリオID | シナリオ名 | 実施者 | 期待結果 |
|-----------|-----------|-------|---------|
| US-013 | 目標設定・進捗管理 | 一般ユーザー、上司 | 目標設定・進捗入力・評価・履歴管理 |
| US-014 | 案件実績入力・一括登録 | 一般ユーザー、管理者 | 実績の個別・一括登録・反映確認 |
| US-015 | 研修参加記録・PDU管理 | 一般ユーザー、人事 | 研修記録・PDUポイント管理 |

#### 8.1.4 管理・運用シナリオ
| シナリオID | シナリオ名 | 実施者 | 期待結果 |
|-----------|-----------|-------|---------|
| US-016 | 帳票出力・ダウンロード | 管理者、人事 | Excel/PDF帳票の正常出力・DL |
| US-017 | システムバックアップ・リストア | システム管理者 | バックアップ・リストア正常実行 |
| US-018 | システム監視・障害通知 | システム管理者 | 監視・通知・アラート正常動作 |

### 8.2 エラーハンドリングシナリオ

| シナリオID | シナリオ名 | 発生条件 | 期待動作 |
|-----------|-----------|---------|---------|
| ES-001 | ネットワーク切断 | 通信エラー | エラーメッセージ表示、再試行機能 |
| ES-002 | セッションタイムアウト | 長時間無操作 | 自動ログアウト、再ログイン促進 |
| ES-003 | データベース接続エラー | DB障害 | エラーページ表示、管理者通知 |
| ES-004 | 不正データ入力 | バリデーションエラー | 入力エラー表示、修正ガイド |

---

## 9. テスト実行・管理

### 9.1 テスト実行プロセス

#### 9.1.1 テスト実行手順
1. **テスト準備**: 環境確認、テストデータ準備
2. **テスト実行**: テストケース実行、結果記録
3. **バグ報告**: 不具合発見時のバグ登録
4. **修正確認**: バグ修正後の再テスト
5. **完了判定**: テスト完了基準の確認

#### 9.1.2 テスト実行管理
- **テスト管理ツール**: GitHub Issues、GitHub Projects
- **テスト実行記録**: テスト実行ログ、スクリーンショット
- **進捗管理**: 日次進捗確認、週次レポート
- **品質メトリクス**: テストカバレッジ、バグ密度、修正率

### 9.2 バグ管理

#### 9.2.1 バグ分類
| 重要度 | 定義 | 対応期限 |
|-------|------|---------|
| Critical | システム停止、データ破損 | 即日 |
| High | 主要機能の動作不良 | 3日以内 |
| Medium | 軽微な機能不良、UI問題 | 1週間以内 |
| Low | 改善要望、軽微な表示問題 | 次回リリース |

#### 9.2.2 バグライフサイクル
1. **発見**: テスト実行中にバグ発見
2. **登録**: GitHub Issuesにバグ登録
3. **分析**: 原因調査、影響度評価
4. **修正**: 開発者による修正実装
5. **確認**: テスターによる修正確認
6. **クローズ**: バグ修正完了

### 9.3 テスト完了基準

#### 9.3.1 機能テスト完了基準
- 全テストケースの実行完了率: 100%
- テストケース成功率: 95%以上
- Critical/Highバグの修正率: 100%
- Mediumバグの修正率: 90%以上

#### 9.3.2 非機能テスト完了基準
- 性能要件の達成率: 100%
- セキュリティ要件の達成率: 100%
- ユーザビリティ要件の達成率: 90%以上
- 可用性要件の達成率: 100%

#### 9.3.3 自動テスト完了基準
- ユニットテストカバレッジ: 80%以上
- 統合テストカバレッジ: 70%以上
- E2Eテストカバレッジ: 主要フロー100%
- 自動テスト成功率: 95%以上

---

## 10. テストツール・技術

### 10.1 テスト自動化ツール

#### 10.1.1 ユニットテスト
- **フレームワーク**: Vitest
- **アサーションライブラリ**: Vitest built-in
- **モックライブラリ**: Vitest built-in
- **カバレッジ**: c8

#### 10.1.2 統合テスト
- **フレームワーク**: Testing Library
- **コンポーネントテスト**: @testing-library/react
- **APIテスト**: supertest
- **データベーステスト**: Prisma Test Environment

#### 10.1.3 E2Eテスト
- **フレームワーク**: Playwright
- **ブラウザ**: Chromium、Firefox、WebKit
- **レポート**: Playwright HTML Reporter
- **CI統合**: GitHub Actions

#### 10.1.4 性能テスト
- **負荷テストツール**: k6
- **APM**: Vercel Analytics
- **フロントエンド性能**: Lighthouse CI
- **リアルユーザー監視**: Sentry Performance

### 10.2 テスト管理ツール

#### 10.2.1 テスト管理
- **テストケース管理**: GitHub Issues
- **テスト実行管理**: GitHub Projects
- **テスト結果レポート**: GitHub Actions Artifacts
- **テストメトリクス**: GitHub Insights

#### 10.2.2 バグ管理
- **バグトラッキング**: GitHub Issues
- **バグ分析**: GitHub Labels
- **バグレポート**: GitHub Issue Templates
- **バグメトリクス**: GitHub Projects

### 10.3 CI/CDパイプライン

#### 10.3.1 自動テスト実行
```yaml
# .github/workflows/test.yml
name: Test
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
      - run: npm ci
      - run: npm run test:unit
      - run: npm run test:integration
      - run: npm run test:e2e
      - run: npm run test:performance
```

#### 10.3.2 品質ゲート
- ユニットテストカバレッジ: 80%以上
- 統合テスト成功率: 95%以上
- E2Eテスト成功率: 100%
- Lighthouse スコア: 90以上
- セキュリティスキャン: 脆弱性なし

---

## 11. リスク・課題管理

### 11.1 テストリスク

| リスクID | リスク内容 | 影響度 | 発生確率 | 対応策 | 担当者 |
|---------|-----------|-------|---------|-------|-------|
| TR-001 | テスト環境の不安定 | 高 | 中 | 環境監視強化、バックアップ環境準備 | 笹尾 |
| TR-002 | テストデータ不足 | 中 | 中 | 早期データ準備、自動生成スクリプト | 黒澤 |
| TR-003 | テスト工数不足 | 高 | 中 | 自動化推進、優先度調整 | 中島 |
| TR-004 | 要件変更によるテスト影響 | 中 | 高 | 変更管理プロセス、影響度分析 | 中島 |
| TR-005 | 外部システム連携テスト困難 | 中 | 中 | モック環境構築、段階的テスト | 笹尾 |

### 11.2 品質リスク

| リスクID | リスク内容 | 影響度 | 発生確率 | 対応策 | 担当者 |
|---------|-----------|-------|---------|-------|-------|
| QR-001 | 性能要件未達 | 高 | 中 | 早期性能テスト、最適化実施 | 笹尾 |
| QR-002 | セキュリティ脆弱性 | 高 | 低 | 定期脆弱性診断、セキュリティレビュー | 笹尾 |
| QR-003 | ユーザビリティ問題 | 中 | 中 | ユーザーテスト早期実施、UI改善 | 黒澤 |
| QR-004 | データ整合性問題 | 高 | 低 | データ検証強化、トランザクション管理 | 笹尾 |

---

## 12. 改訂履歴

| 版数 | 日付 | 改訂者 | 承認者 | 改訂内容 |
|------|------|-------|-------|----------|
| 1.0 | 2025/5/29 | 中島、黒澤 | 中島 | 初版作成 |

---

**以上**
