# 技術スタック選定書

## プロジェクト概要
- **プロジェクト名**: 年間スキル報告書WEB化PJT
- **デプロイ先**: Vercel
- **DB**: PostgreSQL または MySQL（1つのDB）
- **コンテナ**: Docker使用
- **重視項目**: AI駆動開発（Cursor + Cline活用）、教育コスト最小化

## 技術スタック選定の考慮要素

### 制約条件
- **デプロイ先**: Vercel固定
- **DB**: PostgreSQL または MySQL（1つのDB）
- **コンテナ**: Docker使用
- **教育コスト**: 最小限（AI開発支援重視）
- **AI駆動開発**: Cursor、Cline（Claude）等との親和性が高い技術

### AI開発しやすさの観点
- 豊富なサンプルコード・ドキュメント
- Cursorのコード補完精度
- Cline（Claude）での質問対応の充実度
- コミュニティの活発さ

## 技術スタック候補パッケージ

### 【パッケージA】Next.js フルスタック + PostgreSQL
**フレームワーク・言語**
- **フロントエンド**: Next.js 14 (TypeScript + React 18)
- **バックエンド**: Next.js API Routes (TypeScript)
- **ORM**: Prisma
- **認証**: NextAuth.js
- **UI**: Tailwind CSS + shadcn/ui
- **バリデーション**: Zod
- **API**: tRPC (型安全なAPI)
- **テスト**: Vitest + Testing Library

**DB**
- **メイン**: PostgreSQL 15

**デプロイ**
- **ホスティング**: Vercel
- **DB**: Supabase PostgreSQL / Neon PostgreSQL
- **コンテナ**: Docker + Docker Compose

**Docker構成**
```yaml
# docker-compose.yml
services:
  app:
    build: .
    ports: ["3000:3000"]
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: skillreport
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
    ports: ["5432:5432"]
    volumes: ["postgres_data:/var/lib/postgresql/data"]
```

---

### 【パッケージB】T3 Stack + PostgreSQL
**フレームワーク・言語**
- **フロントエンド**: Next.js 14 (TypeScript + React 18)
- **バックエンド**: Next.js API Routes (TypeScript)
- **ORM**: Prisma
- **認証**: NextAuth.js
- **UI**: Tailwind CSS + Headless UI
- **バリデーション**: Zod
- **API**: tRPC (型安全なフルスタック)
- **テスト**: Vitest + Testing Library

**DB**
- **メイン**: PostgreSQL 15

**デプロイ**
- **ホスティング**: Vercel
- **DB**: Supabase PostgreSQL / Neon PostgreSQL
- **コンテナ**: Docker + Docker Compose

**Docker構成**
```yaml
# docker-compose.yml
services:
  app:
    build: .
    ports: ["3000:3000"]
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: skillreport
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
    ports: ["5432:5432"]
    volumes: ["postgres_data:/var/lib/postgresql/data"]
  redis:
    image: redis:7-alpine
    ports: ["6379:6379"]
```

---

### 【パッケージC】Python FastAPI + React + PostgreSQL
**フレームワーク・言語**
- **フロントエンド**: React 18 (TypeScript + Vite)
- **バックエンド**: FastAPI (Python 3.11)
- **ORM**: SQLAlchemy + Alembic
- **認証**: FastAPI-Users + python-jose
- **UI**: Tailwind CSS + React Query
- **バリデーション**: Pydantic
- **API**: FastAPI (自動OpenAPI生成)
- **テスト**: pytest + React Testing Library
- **非同期処理**: Celery + Redis

**DB**
- **メイン**: PostgreSQL 15

**デプロイ**
- **フロント**: Vercel
- **バックエンド**: Railway / Render / Fly.io
- **DB**: Supabase PostgreSQL / Neon PostgreSQL
- **コンテナ**: Docker + Docker Compose

**Docker構成**
```yaml
services:
  frontend:
    build: ./frontend
    ports: ["3000:3000"]
  backend:
    build: ./backend
    ports: ["8000:8000"]
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: skillreport
    ports: ["5432:5432"]
  redis:
    image: redis:7-alpine
    ports: ["6379:6379"]
```

---

### 【パッケージD】Python Django + React + PostgreSQL
**フレームワーク・言語**
- **フロントエンド**: React 18 (TypeScript + Vite)
- **バックエンド**: Django 4.2 (Python 3.11)
- **ORM**: Django ORM
- **認証**: Django Authentication + django-allauth
- **UI**: Tailwind CSS + SWR
- **バリデーション**: Django Forms + django-rest-framework
- **API**: Django REST Framework
- **テスト**: pytest-django + React Testing Library
- **非同期処理**: Celery + Redis
- **管理画面**: Django Admin

**DB**
- **メイン**: PostgreSQL 15

**デプロイ**
- **フロント**: Vercel
- **バックエンド**: Railway / Render / Heroku
- **DB**: Supabase PostgreSQL / Neon PostgreSQL
- **コンテナ**: Docker + Docker Compose

---

### 【パッケージE】Ruby on Rails + React + PostgreSQL
**フレームワーク・言語**
- **フロントエンド**: React 18 (TypeScript + Vite)
- **バックエンド**: Ruby on Rails 7.1 (Ruby 3.2)
- **ORM**: Active Record
- **認証**: Devise + omniauth
- **UI**: Tailwind CSS + React Query
- **バリデーション**: Rails Validations
- **API**: Rails API
- **テスト**: RSpec + Capybara + React Testing Library
- **非同期処理**: Sidekiq + Redis
- **管理画面**: ActiveAdmin

**DB**
- **メイン**: PostgreSQL 15

**デプロイ**
- **フロント**: Vercel
- **バックエンド**: Railway / Render / Heroku
- **DB**: Supabase PostgreSQL / Neon PostgreSQL
- **コンテナ**: Docker + Docker Compose

**Docker構成**
```yaml
services:
  frontend:
    build: ./frontend
    ports: ["3000:3000"]
  backend:
    build: ./backend
    ports: ["3000:3000"]
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: skillreport
    ports: ["5432:5432"]
  redis:
    image: redis:7-alpine
    ports: ["6379:6379"]
```

---

### 【パッケージF】Ruby on Rails API + Next.js + MySQL
**フレームワーク・言語**
- **フロントエンド**: Next.js 14 (TypeScript + React 18)
- **バックエンド**: Ruby on Rails 7.1 API mode (Ruby 3.2)
- **ORM**: Active Record
- **認証**: Devise-JWT
- **UI**: Tailwind CSS + SWR
- **バリデーション**: Rails Validations
- **API**: Rails API
- **テスト**: RSpec + Factory Bot + Next.js Testing
- **非同期処理**: Sidekiq + Redis

**DB**
- **メイン**: MySQL 8.0

**デプロイ**
- **フロント**: Vercel
- **バックエンド**: Railway / Render
- **DB**: PlanetScale MySQL / Railway MySQL
- **コンテナ**: Docker + Docker Compose

## AI開発しやすさ + 学習コスト比較（Cursor + Cline重視版）

| 観点 | パッケージA | パッケージB | パッケージC | パッケージD | パッケージE | パッケージF |
|------|------------|------------|------------|------------|------------|------------|
| **Cline（Claude）対応** | ◎ | ◎ | ◎ | ○ | ○ | ○ |
| **Cursorコード支援** | ◎ | ◎ | ◎ | ○ | ○ | ○ |
| **学習コスト** | ○ | ◎ | ○ | △ | △ | ○ |
| **開発速度** | ◎ | ◎ | ○ | ○ | ○ | ○ |
| **Vercel親和性** | ◎ | ◎ | ○ | ○ | ○ | ○ |
| **AI活用しやすさ** | ◎ | ◎ | ◎ | ○ | △ | △ |
| **コミュニティ活発さ** | ◎ | ◎ | ◎ | ○ | ○ | ○ |
| **日本語情報** | ◎ | ○ | ○ | ◎ | ◎ | ○ |

## フレームワーク別AI支援度詳細評価

### Next.js（パッケージA, B）
**Cursorでの開発体験**
```
✅ Tab補完でコンポーネント自動生成
✅ API Routes自動実装
✅ Prismaスキーマから型定義自動生成
✅ Tailwind CSSクラス名自動補完
✅ テストコード自動生成
✅ エラー修正提案が的確
```

### FastAPI（パッケージC）
**Cursorでの開発体験**
```
✅ Pydanticモデル自動生成
✅ FastAPIエンドポイント自動実装
✅ SQLAlchemyモデル自動作成
✅ 依存性注入パターン自動適用
✅ 型ヒント完全対応
✅ OpenAPI仕様書自動生成
```

### Django（パッケージD）
**Cursorでの開発体験**
```
○ モデル定義補完
△ settings.py設定は手動確認必要
○ ビュー関数自動生成
△ URL設定は手動調整が必要
○ Django Admin設定補完
```

### Ruby on Rails（パッケージE, F）
**Cursorでの開発体験**
```
○ モデル・コントローラー補完
△ Gemfile設定は手動確認必要
○ ルーティング補完
△ ActiveRecordの複雑な関連は手動調整必要
○ RSpec テスト補完
```

## 推奨度ランキング（Cursor + Cline重視版）

### 1位：パッケージA（Next.js フルスタック）
**AI支援度**: ★★★★★
- **フレームワーク**: Next.js - AI支援で最高の開発体験
- **開発効率**: AI支援により開発速度3-5倍向上
- **学習コスト**: 一つのフレームワークで完結
- **Vercel親和性**: デプロイまで一貫してAI支援可能

### 2位：パッケージC（Python FastAPI + React）
**AI支援度**: ★★★★★
- **フレームワーク**: FastAPI - 型ヒントで高精度AI補完
- **拡張性**: AI/ML機能追加時にPythonエコシステム活用
- **API開発**: 自動ドキュメント生成でAPI開発が効率的
- **分離アーキテクチャ**: フロント・バック独立開発可能

### 3位：パッケージB（T3 Stack）
**AI支援度**: ★★★★☆
- **フレームワーク**: Next.js + tRPC - 型安全性重視
- **品質**: エンタープライズレベルの堅牢性
- **学習コスト**: やや高いが、AI支援で軽減

### 4位：パッケージE（Ruby on Rails + React）
**AI支援度**: ★★★☆☆
- **フレームワーク**: Rails - 規約により高速開発可能
- **日本語情報**: 豊富でサポート良好
- **運用**: 日本での事例・情報が豊富

## 最終推奨

### 最も推奨：パッケージA（Next.js フルスタック）

**理由**
1. **AI支援最適化**: Cursor + Clineの両方で最高の開発体験
2. **学習コスト最小**: Next.js一つのフレームワークで完結
3. **Vercel親和性**: デプロイまで一貫してAI支援可能
4. **開発速度**: AI活用により従来の3-5倍の開発効率

### 次点：パッケージC（Python FastAPI + React）
- 将来的なAI/ML機能拡張を重視する場合
- バックエンド・フロントエンド分離アーキテクチャを重視する場合

## 開発環境セットアップ例（パッケージA）

```bash
# プロジェクト作成
npx create-next-app@latest skill-report-web --typescript --tailwind --eslint --app

# Docker環境起動
docker-compose up -d

# Prisma設定
npx prisma init
npx prisma db push
npx prisma generate

# 開発サーバー起動
npm run dev
```

## 決定事項

**採用技術スタック**: 【未決定】

**決定プロセス**:
1. ステークホルダーレビュー
2. 技術的実現性検証
3. 最終決定・承認

---

**作成日**: 2025/05/27  
**作成者**: AI駆動開発チーム  
**バージョン**: 1.0
