# 年間スキル報告書WEB化PJT - 統合開発ルール

## プロジェクト基本情報

### プロジェクト概要
- **プロジェクト名**: 年間スキル報告書WEB化PJT
- **目的**: AI駆動開発の知見獲得 + 業務効率化・可視化の実現
- **技術スタック**: Next.js 14 + TypeScript + React 18 + Tailwind CSS + PostgreSQL + Vercel
- **開発期間**: 2025年5月開始

### 開発体制
- **責任者**: 黒澤 (@yusuke-kurosawa)
- **PM**: 中島 (@SAS-nakajima)  
- **PL**: 笹尾 (@SAS-sasao)

## AI駆動開発の基本方針

### 技術選定・変更管理
- **技術スタック非依存**: 要件に基づいた最適な技術選定
- **APIファーストアプローチ**: フロントエンド・バックエンド分離設計
- **技術スタック変更時**: 必ずユーザーに確認・承認を得てから実施

### AI活用必須領域
1. **コード生成**: 定型的なCRUD操作、バリデーション
2. **テスト生成**: ユニット・統合・E2Eテストケース
3. **ドキュメント生成**: API仕様書、コメント
4. **設計支援**: アーキテクチャ提案、技術選定

## 要求仕様ID体系・優先度

### カテゴリ分類
- **PLT**: Platform (システム基盤要件)
- **ACC**: Access Control (ユーザー権限管理)
- **PRO**: Profile (個人プロフィール管理)
- **SKL**: Skill (スキル情報管理)
- **CAR**: Career (目標・キャリア管理)
- **WPM**: Work Performance Mgmt (作業実績管理)
- **TRN**: Training (研修・セミナー管理)
- **RPT**: Report (レポート出力)

### 実装優先順序
1. **Phase 1**: 最高優先度（PLT.1-WEB.1, PRO.1-BASE.1, SKL.1-HIER.1）
2. **Phase 2**: 高優先度（認証・権限、スキル検索）
3. **Phase 3**: 中優先度（目標管理、作業実績、研修管理）
4. **Phase 4**: 低優先度（レポート出力、分析機能）

## 開発・実装ルール

### コード作成時の必須事項
1. **要求仕様IDの明記**: 全実装に対応する要求仕様IDをコメントで記載
2. **画面ID・API IDの統一**: 設計書と実装でIDを一致させる
3. **TypeScript型安全性**: 厳密な型定義を必須とする
4. **レスポンシブ対応**: 全画面でマルチデバイス対応を実装

### 非機能要件の必須実装
- **パフォーマンス**: API〜UI まで1秒以内
- **アクセシビリティ**: WCAG 2.1 AA準拠
- **セキュリティ**: AES-256暗号化、TLS必須
- **監査証跡**: 90日間ログ保持

## コーディング規約

### 基本原則
- **DRY原則**: Don't Repeat Yourself - 重複を避ける
- **SOLID原則**: 単一責任、開放閉鎖、リスコフ置換、インターフェース分離、依存性逆転
- **自己文書化コード**: コード自体が何をしているかを明確に表現
- **一貫性**: プロジェクト全体で統一されたスタイルを維持

### 命名規則
- **変数・関数名**: 意味のある名前、動詞+名詞、ブール値は`is`, `has`, `can`接頭辞
- **クラス・コンポーネント名**: PascalCase、名詞で表現
- **ファイル・ディレクトリ名**: kebab-case推奨

### エラーハンドリング
- **早期発見**: エラーは可能な限り早期に検出
- **適切なレベル**: エラーは適切なレベルで処理
- **ログ記録**: エラー情報は必ずログに記録
- **ユーザーフレンドリー**: ユーザーには分かりやすいメッセージを表示

## フロントエンド設計ガイドライン

### コンポーネント設計
- **単一責任の原則**: 1つのコンポーネントは1つの責任
- **再利用性**: 汎用的で再利用可能なコンポーネント作成
- **疎結合**: コンポーネント間の依存関係を最小限に抑制
- **プロパティ設計**: 型安全性、デフォルト値、必須プロパティの最小化

### 状態管理
- **単方向データフロー**: データの流れを予測可能にする
- **状態の最小化**: 必要最小限の状態のみを管理
- **不変性**: 状態の直接変更を避け、新しい状態を作成
- **状態の正規化**: 複雑な状態構造を正規化して管理

### パフォーマンス最適化
- **遅延読み込み**: 必要な時にコンポーネントやリソースを読み込み
- **メモ化**: 計算結果やレンダリング結果をキャッシュ
- **バンドル最適化**: 不要なコードの除去とコード分割

## バックエンド設計ガイドライン

### アーキテクチャ設計
- **レイヤードアーキテクチャ**: プレゼンテーション層、ビジネス層、データアクセス層の分離
- **依存性逆転**: 上位層が下位層に依存しない設計
- **RESTful API**: REST原則に従った設計
- **OpenAPI仕様**: API仕様の標準化と文書化

### セキュリティ設計
- **認証・認可**: JWT、OAuth 2.0、RBAC
- **入力値検証**: サーバーサイドバリデーション必須
- **SQLインジェクション対策**: パラメータ化クエリの使用
- **データ保護**: 暗号化、ハッシュ化、TLS/SSL

### データベース設計
- **正規化**: 第3正規形を基本とし、パフォーマンス要件に応じて非正規化
- **トランザクション管理**: ACID特性の保証
- **データ整合性**: 外部キー制約、チェック制約の適切な設定

## テスト戦略

### テストピラミッド
- **ユニットテスト**: 70%（個別コンポーネント・関数）
- **統合テスト**: 20%（API連携・コンポーネント間）
- **E2Eテスト**: 10%（ユーザーシナリオ）

### 必須テストケース
- **認証・認可**: ログイン、権限チェック、セッション管理
- **スキル管理**: CRUD操作、階層構造、4段階評価
- **データ整合性**: 外部キー制約、トランザクション
- **パフォーマンス**: レスポンス時間、同時接続数

### 非機能テスト
- **パフォーマンステスト**: レスポンス時間1秒以内、100ユーザー同時利用
- **セキュリティテスト**: SQLインジェクション、XSS、認証・認可
- **アクセシビリティテスト**: WCAG 2.1 AA準拠、キーボード操作

## Git・バージョン管理

### ブランチ戦略（Gitflow）
- **main**: 本番リリース用
- **develop**: 開発統合用
- **feature/{要求仕様ID}-{機能名}**: 機能開発用
- **release/v{バージョン}**: リリース準備用
- **hotfix/{緊急度}-{修正内容}**: 緊急修正用

### コミットメッセージ規約
```
[絵文字] [タイプ]: [要求仕様ID] [タイトル]

[本文]

[フッター]
```

**タイプ定義**:
- feat: 新機能（要求仕様ID必須）
- fix: バグ修正
- docs: ドキュメント変更
- style: コードスタイル変更
- refactor: リファクタリング
- test: テスト追加・修正
- chore: ビルド・ツール変更

## AI活用・ログ記録

### AI活用ログ記録
- **日次**: 使用ツール・効果・課題を記録
- **週次**: チーム全体での振り返り・改善提案
- **月次**: 効果測定・プロセス改善

### プロンプトエンジニアリング
- **コード生成時**: 要求仕様、技術要件、コーディング規約を明記
- **テスト生成時**: 対象関数、テスト要件、テストデータパターンを指定
- **設計支援時**: 要件、制約、評価観点を明確化

## ファイル構成・命名規則

### ドキュメント構造
```
docs/
├── requirements/           # 要件定義関連
├── design/                # 設計関連
│   ├── screens/           # 画面設計
│   ├── api/              # API設計
│   ├── database/         # データベース設計
│   ├── batch/            # バッチ設計
│   └── interfaces/       # インターフェース設計
└── testing/              # テスト関連
```

### 設計書命名規則
- **画面設計書**: `画面設計書_SCR-{画面ID}.md`
- **API仕様書**: `API仕様書_API-{API番号}.md`
- **テーブル定義書**: `テーブル定義書_TBL-{テーブル番号}.md`
- **バッチ仕様書**: `バッチ仕様書_BATCH-{バッチ番号}.md`

## 品質保証・成功指標

### 品質ゲート
- **テストカバレッジ**: 80%以上を維持
- **静的解析**: 重大な問題0件
- **セキュリティ**: 脆弱性スキャン通過
- **パフォーマンス**: レスポンス時間1秒以内

### 成功指標（KPI）
- **開発効率**: AI活用率、開発速度、品質指標
- **業務改善**: 作業時間50%削減、エラー70%削減、利用率90%以上
- **システム品質**: 可用性99.5%以上、レスポンス時間1秒以内95%達成

## 必須確認事項・禁止事項

### 必須確認事項
1. **要求仕様ID**: 全実装で対応IDを明確化
2. **設計書整合性**: 画面・API・DB設計の一貫性
3. **非機能要件**: パフォーマンス・セキュリティ・アクセシビリティ
4. **AI活用記録**: 効果・課題の継続的記録

### 禁止事項
- 要求仕様IDなしの実装
- 設計書との不整合
- 非機能要件の未実装

---

この統合ルールに従って、年間スキル報告書WEB化PJTの開発を効率的かつ高品質に進めてください。
