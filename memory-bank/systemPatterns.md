# ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³

## ç¾åœ¨ã®å®Ÿè£…ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### Next.js 14çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Next.js 14 App Router                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Frontend (React 18)          â”‚  Backend (API Routes)       â”‚
â”‚  â”œâ”€ Pages & Components âœ…     â”‚  â”œâ”€ API Endpoints ğŸ”„        â”‚
â”‚  â”œâ”€ State Management ğŸ”„       â”‚  â”œâ”€ Business Logic âŒ        â”‚
â”‚  â”œâ”€ UI Components âœ…          â”‚  â”œâ”€ Data Access Layer ğŸ”„    â”‚
â”‚  â””â”€ Client-side Logic âœ…      â”‚  â””â”€ Authentication ğŸ”„       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Prisma ORM âœ…                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              PostgreSQL 15 (ã‚·ãƒ³ã‚°ãƒ«ãƒ†ãƒŠãƒ³ãƒˆ) âœ…            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å‡¡ä¾‹**: âœ…å®Ÿè£…æ¸ˆã¿ / ğŸ”„éƒ¨åˆ†å®Ÿè£… / âŒæœªå®Ÿè£…

### ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³
- **ã‚·ãƒ³ã‚°ãƒ«ãƒ†ãƒŠãƒ³ãƒˆè¨­è¨ˆ**: tenant_idã‚«ãƒ©ãƒ ãªã—
- **åŸºæœ¬èªè¨¼**: ç°¡æ˜“ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã®ã¿
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: åŸºæœ¬ç”»é¢ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…æ¸ˆã¿
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: åŸºæœ¬APIæ§‹é€ ã®ã¿

## ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³

### ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ï¼ˆã‚·ãƒ³ã‚°ãƒ«ãƒ†ãƒŠãƒ³ãƒˆï¼‰
```sql
-- ç¾åœ¨ã®å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    emp_no VARCHAR(20) UNIQUE,
    email VARCHAR(255) UNIQUE,
    name VARCHAR(100),
    -- tenant_id ãªã—ï¼ˆã‚·ãƒ³ã‚°ãƒ«ãƒ†ãƒŠãƒ³ãƒˆï¼‰
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### è¨­è¨ˆæ›¸ã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæœªå®Ÿè£…ï¼‰
```sql
-- è¨­è¨ˆæ›¸ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæœªå®Ÿè£…ï¼‰
CREATE TABLE example_table (
    id SERIAL PRIMARY KEY,
    tenant_id UUID NOT NULL REFERENCES MST_Tenant(tenant_id),
    -- ãƒ“ã‚¸ãƒã‚¹ãƒ‡ãƒ¼ã‚¿
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Row Level Security è¨­å®šï¼ˆæœªå®Ÿè£…ï¼‰
ALTER TABLE example_table ENABLE ROW LEVEL SECURITY;
CREATE POLICY tenant_isolation ON example_table
    FOR ALL TO authenticated
    USING (tenant_id = current_setting('app.current_tenant_id')::UUID);
```

### å®Ÿè£…æ¸ˆã¿ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 

#### å®Ÿè£…æ¸ˆã¿ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆã‚·ãƒ³ã‚°ãƒ«ãƒ†ãƒŠãƒ³ãƒˆç‰ˆï¼‰
- **User**: ãƒ¦ãƒ¼ã‚¶ãƒ¼åŸºæœ¬æƒ…å ±
- **UserAuth**: èªè¨¼æƒ…å ±
- **Role/Permission**: æ¨©é™ç®¡ç†
- **Department/Position**: çµ„ç¹”ç®¡ç†
- **SkillMaster/SkillCategory**: ã‚¹ã‚­ãƒ«ç®¡ç†
- **UserSkill**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ã‚­ãƒ«è©•ä¾¡
- **CareerPlan/CareerProgress**: ã‚­ãƒ£ãƒªã‚¢ç®¡ç†
- **WorkRecord**: ä½œæ¥­å®Ÿç¸¾
- **Training/UserTraining**: ç ”ä¿®ç®¡ç†
- **AuditLog**: ç›£æŸ»ãƒ­ã‚°

#### æœªå®Ÿè£…ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆé–¢é€£ï¼‰
- **MST_Tenant**: ãƒ†ãƒŠãƒ³ãƒˆåŸºæœ¬æƒ…å ±
- **MST_TenantSettings**: ãƒ†ãƒŠãƒ³ãƒˆè¨­å®š
- **HIS_LoginHistory**: ãƒ­ã‚°ã‚¤ãƒ³å±¥æ­´
- **HIS_NotificationLog**: é€šçŸ¥é€ä¿¡å±¥æ­´
- **HIS_TenantBilling**: ãƒ†ãƒŠãƒ³ãƒˆèª²é‡‘å±¥æ­´

## APIã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³

### ç¾åœ¨ã®APIæ§‹é€ ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
```typescript
// åŸºæœ¬APIæ§‹é€ 
/api/auth/login          // âœ… å®Ÿè£…æ¸ˆã¿

// æœªå®Ÿè£…API
/api/v1/{resource}       // âŒ æœªå®Ÿè£…
â”œâ”€ GET    /api/v1/users
â”œâ”€ GET    /api/v1/users/{id}
â”œâ”€ POST   /api/v1/users
â”œâ”€ PUT    /api/v1/users/{id}
â””â”€ DELETE /api/v1/users/{id}
```

### è¨­è¨ˆæ›¸ã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆAPIï¼ˆæœªå®Ÿè£…ï¼‰
```typescript
// ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œAPIï¼ˆè¨­è¨ˆã®ã¿ï¼‰
/api/v1/tenants/{tenant_id}/{resource}
```

### ç¾åœ¨ã®èªè¨¼ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆéƒ¨åˆ†å®Ÿè£…ï¼‰
```typescript
// å®Ÿè£…æ¸ˆã¿: åŸºæœ¬èªè¨¼
export async function POST(request: NextRequest) {
  // åŸºæœ¬çš„ãªãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã®ã¿
}

// æœªå®Ÿè£…: ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆèªè¨¼
// 1. ãƒ­ã‚°ã‚¤ãƒ³ â†’ JWT ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œ
// 2. ãƒ†ãƒŠãƒ³ãƒˆé¸æŠ â†’ ãƒ†ãƒŠãƒ³ãƒˆæƒ…å ±ã‚’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ä¿å­˜
// 3. API ãƒªã‚¯ã‚¨ã‚¹ãƒˆ â†’ ãƒ†ãƒŠãƒ³ãƒˆæƒ…å ±ã‚’è‡ªå‹•ä»˜ä¸
// 4. ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ â†’ RLS ã«ã‚ˆã‚‹è‡ªå‹•ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
```

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ï¼ˆæœªçµ±ä¸€ï¼‰
```typescript
// è¨­è¨ˆæ›¸ã®çµ±ä¸€å½¢å¼ï¼ˆæœªå®Ÿè£…ï¼‰
interface SuccessResponse<T> {
  success: true;
  data: T;
  pagination?: PaginationInfo;
  timestamp: string;
}

interface ErrorResponse {
  success: false;
  error: {
    code: string;
    message: string;
    details?: any;
  };
  timestamp: string;
}
```

## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³

### å®Ÿè£…æ¸ˆã¿ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ 
```
src/
â”œâ”€ app/                    # Next.js App Router âœ…
â”‚  â”œâ”€ dashboard/page.tsx   # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ âœ…
â”‚  â”œâ”€ profile/page.tsx     # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« âœ…
â”‚  â”œâ”€ skills/page.tsx      # ã‚¹ã‚­ãƒ«ç®¡ç† âœ…
â”‚  â”œâ”€ career/page.tsx      # ã‚­ãƒ£ãƒªã‚¢ âœ…
â”‚  â”œâ”€ work/page.tsx        # ä½œæ¥­å®Ÿç¸¾ âœ…
â”‚  â”œâ”€ training/page.tsx    # ç ”ä¿® âœ…
â”‚  â”œâ”€ reports/page.tsx     # ãƒ¬ãƒãƒ¼ãƒˆ âœ…
â”‚  â””â”€ api/auth/login/      # èªè¨¼API âœ…
â”œâ”€ components/             # å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ âœ…
â”‚  â”œâ”€ ui/                 # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ âœ…
â”‚  â”œâ”€ dashboard/          # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰é–¢é€£ âœ…
â”‚  â”œâ”€ training/           # ç ”ä¿®é–¢é€£ âœ…
â”‚  â””â”€ reports/            # ãƒ¬ãƒãƒ¼ãƒˆé–¢é€£ âœ…
â”œâ”€ lib/                   # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ âœ…
â”‚  â”œâ”€ auth.ts            # èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯ âœ…
â”‚  â”œâ”€ utils.ts           # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ âœ…
â”‚  â””â”€ mockData.ts        # ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ âœ…
```

### æœªå®Ÿè£…ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆé–¢é€£ï¼‰
```
src/
â”œâ”€ app/
â”‚  â”œâ”€ (auth)/             # èªè¨¼é–¢é€£ãƒšãƒ¼ã‚¸ âŒ
â”‚  â”œâ”€ (tenant)/           # ãƒ†ãƒŠãƒ³ãƒˆç®¡ç† âŒ
â”‚  â””â”€ tenant-select/      # ãƒ†ãƒŠãƒ³ãƒˆé¸æŠ âŒ
â”œâ”€ components/
â”‚  â”œâ”€ tenant/             # ãƒ†ãƒŠãƒ³ãƒˆé–¢é€£ âŒ
â”‚  â””â”€ auth/               # èªè¨¼é–¢é€£ âŒ
```

### çŠ¶æ…‹ç®¡ç†ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæœªå®Ÿè£…ï¼‰
```typescript
// è¨­è¨ˆæ›¸ã®çŠ¶æ…‹ç®¡ç†ï¼ˆæœªå®Ÿè£…ï¼‰
interface AppState {
  // èªè¨¼çŠ¶æ…‹
  auth: {
    user: User | null;
    isAuthenticated: boolean;
  };
  
  // ãƒ†ãƒŠãƒ³ãƒˆçŠ¶æ…‹ï¼ˆæœªå®Ÿè£…ï¼‰
  tenant: {
    currentTenant: Tenant | null;
    availableTenants: Tenant[];
  };
  
  // UIçŠ¶æ…‹
  ui: {
    loading: boolean;
    notifications: Notification[];
  };
}
```

### ç¾åœ¨ã®å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// å®Ÿè£…æ¸ˆã¿: åŸºæœ¬çš„ãªãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
export default function DashboardPage() {
  return <DashboardContent />;
}

// æœªå®Ÿè£…: ãƒ†ãƒŠãƒ³ãƒˆåˆ‡ã‚Šæ›¿ãˆãƒ‘ã‚¿ãƒ¼ãƒ³
const switchTenant = async (tenantId: string) => {
  // 1. ãƒ†ãƒŠãƒ³ãƒˆæƒ…å ±æ¤œè¨¼
  // 2. ã‚»ãƒƒã‚·ãƒ§ãƒ³æ›´æ–°
  // 3. ç”»é¢ãƒªãƒ­ãƒ¼ãƒ‰
  // 4. ãƒ‡ãƒ¼ã‚¿å†å–å¾—
};
```

## ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³

### ç¾åœ¨ã®å®Ÿè£…æ§‹é€ 
```
API Routes (Next.js) âœ…
â”œâ”€ Controllers/        # ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç† ğŸ”„
â”œâ”€ Services/          # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ âŒ
â”œâ”€ Repositories/      # ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ âŒ
â””â”€ Models/           # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ« âœ… (Prisma)
```

### å®Ÿè£…æ¸ˆã¿ã‚µãƒ¼ãƒ“ã‚¹å±¤ï¼ˆåŸºæœ¬ã®ã¿ï¼‰
```typescript
// åŸºæœ¬çš„ãªèªè¨¼ã®ã¿å®Ÿè£…
export async function authenticateUser(credentials: LoginCredentials) {
  // åŸºæœ¬çš„ãªãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†
}

// æœªå®Ÿè£…: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯åˆ†é›¢
class UserService {
  constructor(
    private userRepository: UserRepository,
    private tenantService: TenantService // æœªå®Ÿè£…
  ) {}
  
  async createUser(userData: CreateUserData): Promise<User> {
    // 1. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    // 2. ãƒ†ãƒŠãƒ³ãƒˆæ¨©é™ãƒã‚§ãƒƒã‚¯ï¼ˆæœªå®Ÿè£…ï¼‰
    // 3. ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«é©ç”¨
    // 4. ãƒ‡ãƒ¼ã‚¿ä¿å­˜
    // 5. é€šçŸ¥é€ä¿¡ï¼ˆæœªå®Ÿè£…ï¼‰
  }
}
```

### ãƒªãƒã‚¸ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæœªå®Ÿè£…ï¼‰
```typescript
// è¨­è¨ˆæ›¸ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæœªå®Ÿè£…ï¼‰
interface UserRepository {
  findById(id: string): Promise<User | null>;
  findByTenant(tenantId: string): Promise<User[]>;
  create(userData: CreateUserData): Promise<User>;
  update(id: string, userData: UpdateUserData): Promise<User>;
  delete(id: string): Promise<void>;
}
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‘ã‚¿ãƒ¼ãƒ³

### ç¾åœ¨ã®å®Ÿè£…ï¼ˆåŸºæœ¬ã®ã¿ï¼‰
```typescript
// å®Ÿè£…æ¸ˆã¿: åŸºæœ¬èªè¨¼
export async function POST(request: NextRequest) {
  const { email, password } = await request.json();
  // åŸºæœ¬çš„ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¤œè¨¼ã®ã¿
}

// æœªå®Ÿè£…: å¤šå±¤é˜²å¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³
// 1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: ãƒ«ãƒ¼ãƒˆã‚¬ãƒ¼ãƒ‰
// 2. API Gateway: JWTæ¤œè¨¼
// 3. ãƒ“ã‚¸ãƒã‚¹å±¤: æ¨©é™ãƒã‚§ãƒƒã‚¯
// 4. ãƒ‡ãƒ¼ã‚¿å±¤: RLSé©ç”¨
```

### ãƒ‡ãƒ¼ã‚¿ä¿è­·ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆéƒ¨åˆ†å®Ÿè£…ï¼‰
```typescript
// å®Ÿè£…æ¸ˆã¿: åŸºæœ¬è¨­å®š
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: bcrypt ãƒãƒƒã‚·ãƒ¥åŒ– âœ…
- ç’°å¢ƒå¤‰æ•°: .envç®¡ç† âœ…

// æœªå®Ÿè£…: é«˜åº¦ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- ä¿å­˜æ™‚æš—å·åŒ–: AES-256 âŒ
- é€šä¿¡æ™‚æš—å·åŒ–: TLS 1.3 âŒ
- æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ç®¡ç†: å°‚ç”¨æš—å·åŒ– âŒ
```

## ãƒãƒƒãƒå‡¦ç†ãƒ‘ã‚¿ãƒ¼ãƒ³

### è¨­è¨ˆæ›¸ã®ãƒãƒƒãƒã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆæœªå®Ÿè£…ï¼‰
```
Cron Scheduler âŒ
â”œâ”€ ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–ãƒãƒƒãƒç¾¤ (BATCH-001~007) âŒ
â”œâ”€ ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒãƒƒãƒç¾¤ (BATCH-101~105) âŒ
â”œâ”€ ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒãƒƒãƒç¾¤ (BATCH-201~205) âŒ
â”œâ”€ ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†ãƒãƒƒãƒç¾¤ (BATCH-301~307) âŒ
â”œâ”€ é€šçŸ¥ãƒ»é€£æºãƒãƒƒãƒç¾¤ (BATCH-401~409) âŒ
â””â”€ ç›£è¦–ãƒ»æœ€é©åŒ–ãƒãƒƒãƒç¾¤ (BATCH-501~508) âŒ
```

### ãƒãƒƒãƒå®Ÿè¡Œãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæœªå®Ÿè£…ï¼‰
```typescript
// è¨­è¨ˆæ›¸ã®å…±é€šãƒãƒƒãƒåŸºç›¤ï¼ˆæœªå®Ÿè£…ï¼‰
abstract class BaseBatch {
  abstract execute(): Promise<void>;
  
  async run(): Promise<void> {
    try {
      await this.beforeExecute();
      await this.execute();
      await this.afterExecute();
    } catch (error) {
      await this.handleError(error);
    }
  }
}
```

## ç›£è¦–ãƒ»ãƒ­ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³

### ç¾åœ¨ã®å®Ÿè£…ï¼ˆåŸºæœ¬ã®ã¿ï¼‰
```typescript
// åŸºæœ¬çš„ãªconsole.logä½¿ç”¨
console.log('User logged in');

// æœªå®Ÿè£…: æ§‹é€ åŒ–ãƒ­ã‚°
interface LogEntry {
  timestamp: string;
  level: 'ERROR' | 'WARN' | 'INFO' | 'DEBUG';
  tenantId?: string;
  userId?: string;
  action: string;
  details: any;
  traceId: string;
}
```

### ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†ï¼ˆæœªå®Ÿè£…ï¼‰
```typescript
// æœªå®Ÿè£…: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ âŒ
- ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ âŒ
- ã‚¨ãƒ©ãƒ¼ç‡ âŒ
- ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨ç‡ âŒ
- ãƒ†ãƒŠãƒ³ãƒˆåˆ¥ä½¿ç”¨é‡ âŒ
```

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³

### ç¾åœ¨ã®ç’°å¢ƒæ§‹æˆ
```
Development Environment âœ…
â”œâ”€ Next.js Application (Docker) âœ…
â”œâ”€ PostgreSQL Database (Docker) âœ…
â”œâ”€ pgAdmin (Docker) âœ…
â””â”€ Local Development âœ…

Production Environment âŒ
â”œâ”€ Next.js Application (Vercel) âŒ
â”œâ”€ PostgreSQL Database (Vercel Postgres) âŒ
â”œâ”€ File Storage (Vercel Blob) âŒ
â”œâ”€ Monitoring (Vercel Analytics) âŒ
â””â”€ CDN (Vercel Edge Network) âŒ
```

### CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆæœªå®Ÿè£…ï¼‰
```
GitHub Actions âŒ
â”œâ”€ Code Quality Check âŒ
â”œâ”€ Unit Tests âŒ
â”œâ”€ Integration Tests âŒ
â”œâ”€ Security Scan âŒ
â”œâ”€ Build & Deploy âŒ
â””â”€ Post-deployment Tests âŒ
```

## å®Ÿè£…æ–¹é‡ã®é¸æŠè‚¢

### é¸æŠè‚¢1: ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œå®Ÿè£…
**å¿…è¦ãªå¤‰æ›´**:
- å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã«tenant_idè¿½åŠ 
- Row Level Securityå®Ÿè£…
- èªè¨¼ã‚·ã‚¹ãƒ†ãƒ æ‹¡å¼µ
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä¿®æ­£

### é¸æŠè‚¢2: ã‚·ãƒ³ã‚°ãƒ«ãƒ†ãƒŠãƒ³ãƒˆç¶™ç¶š
**ç¾åœ¨ã®å®Ÿè£…æ´»ç”¨**:
- æ—¢å­˜ã‚¹ã‚­ãƒ¼ãƒç¶™ç¶šä½¿ç”¨
- APIå®Ÿè£…å®Œæˆ
- æ©Ÿèƒ½å®Œæˆåº¦å‘ä¸Š

### é¸æŠè‚¢3: æ®µéšçš„ç§»è¡Œ
**Phase 1**: ã‚·ãƒ³ã‚°ãƒ«ãƒ†ãƒŠãƒ³ãƒˆå®Œæˆ
**Phase 2**: ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆåŒ–

## æ‹¡å¼µæ€§ãƒ‘ã‚¿ãƒ¼ãƒ³

### æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ï¼ˆæœªå®Ÿè£…ï¼‰
- **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**: Vercel Serverless Functions âŒ
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: PostgreSQL Read Replicas âŒ
- **ãƒ•ã‚¡ã‚¤ãƒ«**: Vercel Blob Storage âŒ
- **CDN**: Vercel Edge Network âŒ

### å‚ç›´ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ï¼ˆæœªå®Ÿè£…ï¼‰
- **ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆ**: Vercel Pro Plan âŒ
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: PostgreSQL ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒƒãƒ— âŒ
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: å®¹é‡æ‹¡å¼µ âŒ
- **å¸¯åŸŸ**: å¸¯åŸŸå¹…æ‹¡å¼µ âŒ

## æ¬¡å›å®Ÿè£…æ™‚ã®é‡ç‚¹é …ç›®

### å®Ÿè£…æ–¹é‡æ±ºå®šå¾Œã®ä½œæ¥­
1. **ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆé¸æŠæ™‚**: ã‚¹ã‚­ãƒ¼ãƒå…¨é¢æ”¹ä¿®
2. **ã‚·ãƒ³ã‚°ãƒ«ãƒ†ãƒŠãƒ³ãƒˆé¸æŠæ™‚**: APIãƒ»æ©Ÿèƒ½å®Ÿè£…å®Œæˆ
3. **æ®µéšçš„ç§»è¡Œé¸æŠæ™‚**: Phase 1å®Œæˆå¾Œã«ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆåŒ–

### å…±é€šå®Ÿè£…é …ç›®
1. **APIå®Ÿè£…**: CRUDæ“ä½œã®å®Œå…¨å®Ÿè£…
2. **èªè¨¼å¼·åŒ–**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å‘ä¸Š
3. **ãƒ†ã‚¹ãƒˆå®Ÿè£…**: å“è³ªä¿è¨¼
4. **ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™**: æœ¬ç•ªç’°å¢ƒæ§‹ç¯‰

ã“ã®ç¾å®Ÿçš„ãªã‚·ã‚¹ãƒ†ãƒ ãƒ‘ã‚¿ãƒ¼ãƒ³æƒ…å ±ã«ã‚ˆã‚Šã€å®Ÿè£…æ–¹é‡æ±ºå®šã¨ä»Šå¾Œã®é–‹ç™ºè¨ˆç”»ç­–å®šã‚’é©åˆ‡ã«è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚
